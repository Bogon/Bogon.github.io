<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
<script data-ad-client="ca-pub-5714801576974230" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="G0fHOrfJn5sHWzmi6ZCcg2aX83myBc-9U1BJZJJDSTU">
  <meta name="baidu-site-verification" content="7gJOLignE2">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.xuebaonline.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>


  <meta name="description" content="MySQL-视图、事务、索引、函数、GO连接MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL-视图、事务、索引、函数、GO连接MySQL">
<meta property="og:url" content="https://www.xuebaonline.com/MySQL-%E8%A7%86%E5%9B%BE%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E7%B4%A2%E5%BC%95%E3%80%81%E5%87%BD%E6%95%B0%E3%80%81GO%E8%BF%9E%E6%8E%A5MySQL/index.html">
<meta property="og:site_name" content="Char&#39;s Blog">
<meta property="og:description" content="MySQL-视图、事务、索引、函数、GO连接MySQL">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537061664763.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537061715978.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537067071676.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537011074242.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537094210154.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537094342573.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537011722807.png">
<meta property="article:published_time" content="2021-05-30T10:39:06.000Z">
<meta property="article:modified_time" content="2021-12-18T11:29:26.073Z">
<meta property="article:author" content="Char">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="MySQL学习">
<meta property="article:tag" content="列类型">
<meta property="article:tag" content="数据完整性">
<meta property="article:tag" content="数据库设计">
<meta property="article:tag" content="查询语句SQL">
<meta property="article:tag" content="视图">
<meta property="article:tag" content="事务">
<meta property="article:tag" content="索引">
<meta property="article:tag" content="函数">
<meta property="article:tag" content="GO连接MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537061664763.png">

<link rel="canonical" href="https://www.xuebaonline.com/MySQL-%E8%A7%86%E5%9B%BE%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E7%B4%A2%E5%BC%95%E3%80%81%E5%87%BD%E6%95%B0%E3%80%81GO%E8%BF%9E%E6%8E%A5MySQL/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<script data-ad-client="ca-pub-5714801576974230" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <title>MySQL-视图、事务、索引、函数、GO连接MySQL | Char's Blog</title>
  
    <script>
      function sendPageView() {
        if (CONFIG.hostname !== location.hostname) return;
        var uid = localStorage.getItem('uid') || (Math.random() + '.' + Math.random());
        localStorage.setItem('uid', uid);
        navigator.sendBeacon('https://www.google-analytics.com/collect', new URLSearchParams({
          v  : 1,
          tid: 'UA-165583776-1',
          cid: uid,
          t  : 'pageview',
          dp : encodeURIComponent(location.pathname)
        }));
      }
      document.addEventListener('pjax:complete', sendPageView);
      sendPageView();
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f44aa1d26d8ba6a20c1a09a9cdcd7e3d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Char's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Char's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">如切如磋，如琢如磨。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">143</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">67</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">176</span></a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.xuebaonline.com/MySQL-%E8%A7%86%E5%9B%BE%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E7%B4%A2%E5%BC%95%E3%80%81%E5%87%BD%E6%95%B0%E3%80%81GO%E8%BF%9E%E6%8E%A5MySQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://cdn.xuebaonline.com/blog_avatar.JPG">
      <meta itemprop="name" content="Char">
      <meta itemprop="description" content="曾经沧海难为水，除却巫山不是云。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Char's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL-视图、事务、索引、函数、GO连接MySQL
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-30 18:39:06" itemprop="dateCreated datePublished" datetime="2021-05-30T18:39:06+08:00">2021-05-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/MySQL-%E8%A7%86%E5%9B%BE%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E7%B4%A2%E5%BC%95%E3%80%81%E5%87%BD%E6%95%B0%E3%80%81GO%E8%BF%9E%E6%8E%A5MySQL/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/MySQL-%E8%A7%86%E5%9B%BE%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E7%B4%A2%E5%BC%95%E3%80%81%E5%87%BD%E6%95%B0%E3%80%81GO%E8%BF%9E%E6%8E%A5MySQL/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>31k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>29 分钟</span>
            </span>
            <div class="post-description">MySQL-视图、事务、索引、函数、GO连接MySQL</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="1-1-目标"><a href="#1-1-目标" class="headerlink" title="1.1  目标"></a>1.1  目标</h2><ul>
<li>理解多表查询</li>
<li>理解子查询</li>
<li>能够创建视图</li>
<li>能够删除视图</li>
<li>能够查看创建视图的SQL语句</li>
<li>能够理解事务的作用</li>
<li>能够操作事务</li>
<li>理解索引的作用</li>
<li>能够创建索引</li>
<li>能够删除索引</li>
<li>知道常用的函数</li>
<li>了解预处理语句的作用</li>
<li>能够使用预处理语句</li>
<li>了解存储过程的作用</li>
<li>能够创建存储过程</li>
<li>能够调用存储过程</li>
<li>能够通过Go语言连接MySQL数据库</li>
<li>能够通过Go语言对MySQL进行增、删、改、查的操作</li>
</ul>
<a id="more"></a>

<h2 id="1-2-多表查询分类"><a href="#1-2-多表查询分类" class="headerlink" title="1.2    多表查询分类"></a>1.2    多表查询分类</h2><p>将多个表的数据横向的联合起来。<br>1、    内连接<br>2、    外连接<br>    a)    左外连接<br>    b)    右外连接<br>3、    交叉连接<br>4、    自然连接</p>
<h4 id="1-2-1-内连接【inner-join】"><a href="#1-2-1-内连接【inner-join】" class="headerlink" title="1.2.1    内连接【inner join】"></a>1.2.1    内连接【inner join】</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法一：select 列名 from 表1 inner join 表2 on 表1.公共字段&#x3D;表2.公共字段</span><br><span class="line"></span><br><span class="line">语法二：select 列名 from 表1,表2 where 表1.公共字段&#x3D;表2.公共字段</span><br></pre></td></tr></table></figure>

<p>例题</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">方法一：</span><br><span class="line">mysql&gt; select stuname,stusex,writtenexam,labexam from stuinfo inner join stumarks on stuinfo.stuno=stumarks.stuno;</span><br><span class="line">+<span class="comment">----------+--------+-------------+---------+</span></span><br><span class="line">| stuname  | stusex | writtenexam | labexam |</span><br><span class="line">+<span class="comment">----------+--------+-------------+---------+</span></span><br><span class="line">| 李斯文        | 女      |          80 |      58 |</span><br><span class="line">| 李文才        | 男       |          50 |      90 |</span><br><span class="line">| 欧阳俊雄        | 男       |          65 |      50 |</span><br><span class="line">| 张秋丽         | 男       |          77 |      82 |</span><br><span class="line">| 争青小子        | 男       |          56 |      48 |</span><br><span class="line">+<span class="comment">----------+--------+-------------+---------+</span></span><br><span class="line"></span><br><span class="line">方法二：</span><br><span class="line">mysql&gt; select stuinfo.stuno,stuname,stusex,writtenexam,labexam from stuinfo,stumarks where stuinfo.stuno=stumarks.stuno;</span><br><span class="line">+<span class="comment">--------+----------+--------+-------------+---------+</span></span><br><span class="line">| stuno  | stuname  | stusex | writtenexam | labexam |</span><br><span class="line">+<span class="comment">--------+----------+--------+-------------+---------+</span></span><br><span class="line">| s25303 | 李斯文        | 女      |          80 |      58 |</span><br><span class="line">| s25302 | 李文才        | 男       |          50 |      90 |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |          65 |      50 |</span><br><span class="line">| s25301 | 张秋丽         | 男       |          77 |      82 |</span><br><span class="line">| s25318 | 争青小子        | 男       |          56 |      48 |</span><br><span class="line">+<span class="comment">--------+----------+--------+-------------+---------+</span></span><br><span class="line"></span><br><span class="line">可以给表取别名</span><br><span class="line">mysql&gt; select i.stuno,stuname,stusex,writtenexam,labexam from stuinfo i,stumarks s where i.stuno=s.stuno;</span><br><span class="line">+<span class="comment">--------+----------+--------+-------------+---------+</span></span><br><span class="line">| stuno  | stuname  | stusex | writtenexam | labexam |</span><br><span class="line">+<span class="comment">--------+----------+--------+-------------+---------+</span></span><br><span class="line">| s25303 | 李斯文        | 女      |          80 |      58 |</span><br><span class="line">| s25302 | 李文才        | 男       |          50 |      90 |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |          65 |      50 |</span><br><span class="line">| s25301 | 张秋丽         | 男       |          77 |      82 |</span><br><span class="line">| s25318 | 争青小子        | 男       |          56 |      48 |</span><br><span class="line">+<span class="comment">--------+----------+--------+-------------+---------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<p>脚下留心：显示公共字段需要指定表名 <img src="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537061664763.png"></p>
<p> <img src="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537061715978.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">思考：</span><br><span class="line">select * from 表1 inner join 表2 on 表1.公共字段&#x3D;表2.公共字段  和</span><br><span class="line">select * from 表2 inner join 表1 on 表1.公共字段&#x3D;表2.公共字段   结果是否一样？</span><br><span class="line">答：一样的，因为内连接获取的是两个表的公共部分</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">多学一招：三个表的内连接如何实现？</span><br><span class="line">select * from 表1 inner join 表2 on 表1.公共字段&#x3D;表2.公共字段</span><br><span class="line">inner join 表3 on 表2.公共字段&#x3D;表3.公共字段</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2-左外连接【left-join】"><a href="#1-2-2-左外连接【left-join】" class="headerlink" title="1.2.2    左外连接【left join】"></a>1.2.2    左外连接【left join】</h4><p>以左边的表为标准，如果右边的表没有对应的记录，用NULL填充。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法：select 列名 from 表1 left join 表2 on 表1.公共字段&#x3D;表2.公共字段</span><br></pre></td></tr></table></figure>

<p>例题</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select stuname,writtenexam,labexam from stuinfo left join stumarks on stuinfo.stuno=stumarks.stuno;</span><br><span class="line">+<span class="comment">----------+-------------+---------+</span></span><br><span class="line">| stuname  | writtenexam | labexam |</span><br><span class="line">+<span class="comment">----------+-------------+---------+</span></span><br><span class="line">| 张秋丽         |          77 |      82 |</span><br><span class="line">| 李文才        |          50 |      90 |</span><br><span class="line">| 李斯文        |          80 |      58 |</span><br><span class="line">| 欧阳俊雄        |          65 |      50 |</span><br><span class="line">| 诸葛丽丽         |        NULL |    NULL |</span><br><span class="line">| 争青小子        |          56 |      48 |</span><br><span class="line">| 梅超风        |        NULL |    NULL |</span><br><span class="line">+<span class="comment">----------+-------------+---------+</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">思考：</span><br><span class="line">select * from 表1 left join 表2 on 表1.公共字段&#x3D;表2.公共字段</span><br><span class="line">和</span><br><span class="line">select * from 表2 left join 表1 on 表1.公共字段&#x3D;表2.公共字段   是否一样？</span><br><span class="line">答：不一样，左连接一左边的表为准。</span><br></pre></td></tr></table></figure>

<h4 id="1-2-3-右外连接【right-join】"><a href="#1-2-3-右外连接【right-join】" class="headerlink" title="1.2.3    右外连接【right join】"></a>1.2.3    右外连接【right join】</h4><p>以右边的表为标准，如果左边的表没有对应的记录，用NULL填充。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法：select 列名 from 表1 right join 表2 on 表1.公共字段&#x3D;表2.公共字段</span><br></pre></td></tr></table></figure>

<p>例题</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select stuname,writtenexam,labexam from stuinfo right join stumarks on stuinfo.stuno=stumarks.stuno;</span><br><span class="line">+<span class="comment">----------+-------------+---------+</span></span><br><span class="line">| stuname  | writtenexam | labexam |</span><br><span class="line">+<span class="comment">----------+-------------+---------+</span></span><br><span class="line">| 李斯文        |          80 |      58 |</span><br><span class="line">| 李文才        |          50 |      90 |</span><br><span class="line">| 欧阳俊雄        |          65 |      50 |</span><br><span class="line">| 张秋丽         |          77 |      82 |</span><br><span class="line">| 争青小子        |          56 |      48 |</span><br><span class="line">| NULL     |          66 |      77 |</span><br><span class="line">+<span class="comment">----------+-------------+---------+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">思考：</span><br><span class="line">select * from 表1 left join 表2 on 表1.公共字段&#x3D;表2.公共字段</span><br><span class="line">和</span><br><span class="line">select * from 表2 right join 表1 on 表1.公共字段&#x3D;表2.公共字段  是否一样？</span><br><span class="line"></span><br><span class="line">答：一样的</span><br></pre></td></tr></table></figure>

<h4 id="1-2-4-交叉连接【cross-join】"><a href="#1-2-4-交叉连接【cross-join】" class="headerlink" title="1.2.4    交叉连接【cross join】"></a>1.2.4    交叉连接【cross join】</h4><p>插入测试数据</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(10)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t1 values (1,'tom'),(2,'berry');</span><br><span class="line">Query OK, 2 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table t2(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; score int);</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t2 values (1,88),(2,99);</span><br></pre></td></tr></table></figure>

<p>1、如果没有连接表达式返回的是笛卡尔积</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from t1 cross join t2;   # 返回笛卡尔积</span><br><span class="line">+<span class="comment">------+-------+------+-------+</span></span><br><span class="line">| id   | name  | id   | score |</span><br><span class="line">+<span class="comment">------+-------+------+-------+</span></span><br><span class="line">|    1 | tom   |    1 |    88 |</span><br><span class="line">|    2 | berry |    1 |    88 |</span><br><span class="line">|    1 | tom   |    2 |    99 |</span><br><span class="line">|    2 | berry |    2 |    99 |</span><br><span class="line">+<span class="comment">------+-------+------+-------+</span></span><br></pre></td></tr></table></figure>

<p>2、如果有连接表达式等价于内连接</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from t1 cross join t2 where t1.id=t2.id;</span><br><span class="line">+<span class="comment">------+-------+------+-------+</span></span><br><span class="line">| id   | name  | id   | score |</span><br><span class="line">+<span class="comment">------+-------+------+-------+</span></span><br><span class="line">|    1 | tom   |    1 |    88 |</span><br><span class="line">|    2 | berry |    2 |    99 |</span><br><span class="line">+<span class="comment">------+-------+------+-------+</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-5-自然连接【natural】"><a href="#1-2-5-自然连接【natural】" class="headerlink" title="1.2.5    自然连接【natural】"></a>1.2.5    自然连接【natural】</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">自动的判断连接条件，它是过同名字段来判断的</span><br></pre></td></tr></table></figure>

<p>自然连接又分为：</p>
<ol>
<li>自然内连接        natural join</li>
<li>自然左外连接        natural left join</li>
<li>自然右外连接        natural right join</li>
</ol>
<p>例题：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自然内连接</span></span><br><span class="line">mysql&gt; select * from stuinfo natural join stumarks;</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+---------+-------------+---------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress | examNo  | writtenExam | labExam |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+---------+-------------+---------+</span></span><br><span class="line">| s25303 | 李斯文        | 女      |     22 |       2 | 北京           | s271811 |          80 |</span><br><span class="line">  58 |</span><br><span class="line">| s25302 | 李文才        | 男       |     31 |       3 | 上海          | s271813 |          50 |</span><br><span class="line">  90 |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |     28 |       4 | 天津           | s271815 |          65 |</span><br><span class="line">     50 |</span><br><span class="line">| s25301 | 张秋丽         | 男       |     18 |       1 | 北京           | s271816 |          77 |</span><br><span class="line">    82 |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           | s271819 |          56 |</span><br><span class="line">     48 |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+---------+-------------+---------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自然左外连接</span></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> stuinfo <span class="keyword">natural</span> <span class="keyword">left</span> <span class="keyword">join</span> stumarks;</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+---------+-------------+---------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress | examNo  | writtenExam | labExam |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+---------+-------------+---------+</span></span><br><span class="line">| s25301 | 张秋丽         | 男       |     18 |       1 | 北京           | s271816 |          77</span><br><span class="line">    82 |</span><br><span class="line">| s25302 | 李文才        | 男       |     31 |       3 | 上海          | s271813 |          50 |</span><br><span class="line">  90 |</span><br><span class="line">| s25303 | 李斯文        | 女      |     22 |       2 | 北京           | s271811 |          80 |</span><br><span class="line">  58 |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |     28 |       4 | 天津           | s271815 |          65</span><br><span class="line">     50 |</span><br><span class="line">| s25305 | 诸葛丽丽         | 女      |     23 |       7 | 河南           | NULL    |        NULL</span><br><span class="line">   NULL |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           | s271819 |          56</span><br><span class="line">     48 |</span><br><span class="line">| s25319 | 梅超风        | 女      |     23 |       5 | 河北          | NULL    |        NULL |</span><br><span class="line">ULL |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+---------+-------------+---------+</span></span><br><span class="line">7 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自然右外连接</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> stuinfo <span class="keyword">natural</span> <span class="keyword">right</span> <span class="keyword">join</span> stumarks;</span><br><span class="line">+<span class="comment">--------+---------+-------------+---------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | examNo  | writtenExam | labExam | stuName  | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+---------+-------------+---------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| s25303 | s271811 |          80 |      58 | 李斯文        | 女      |     22 |       2 | 北京</span><br><span class="line">     |</span><br><span class="line">| s25302 | s271813 |          50 |      90 | 李文才        | 男       |     31 |       3 | 上海</span><br><span class="line">     |</span><br><span class="line">| s25304 | s271815 |          65 |      50 | 欧阳俊雄        | 男       |     28 |       4 | 天津</span><br><span class="line">        |</span><br><span class="line">| s25301 | s271816 |          77 |      82 | 张秋丽         | 男       |     18 |       1 | 北京</span><br><span class="line">       |</span><br><span class="line">| s25318 | s271819 |          56 |      48 | 争青小子        | 男       |     26 |       6 | 天津</span><br><span class="line">        |</span><br><span class="line">| s25320 | s271820 |          66 |      77 | NULL     | NULL   |   NULL |    NULL | NULL       |</span><br><span class="line">+<span class="comment">--------+---------+-------------+---------+----------+--------+--------+---------+------------+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>自然连接结论：</p>
<ol>
<li><p>表连接通过同名的字段来连接的</p>
</li>
<li><p>如果没有同名的字段返回笛卡尔积</p>
</li>
<li><p>会对结果进行整理，整理的规则如下</p>
<p> a)    连接字段保留一个</p>
<p> b)    连接字段放在最前面</p>
<p> c)     左外连接左边在前，右外连接右表在前</p>
</li>
</ol>
<h4 id="1-2-6-using"><a href="#1-2-6-using" class="headerlink" title="1.2.6    using()"></a>1.2.6    using()</h4><ol>
<li><p>用来指定连接字段。</p>
</li>
<li><p>using()也会对连接字段进行整理，整理方式和自然连接是一样的。</p>
</li>
</ol>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from stuinfo inner join stumarks using(stuno);   # using指定字段</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+---------+-------------+---------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress | examNo  | writtenExam | labExam |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+---------+-------------+---------+</span></span><br><span class="line">| s25303 | 李斯文        | 女      |     22 |       2 | 北京           | s271811 |          80 |</span><br><span class="line">  58 |</span><br><span class="line">| s25302 | 李文才        | 男       |     31 |       3 | 上海          | s271813 |          50 |</span><br><span class="line">  90 |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |     28 |       4 | 天津           | s271815 |          65 |</span><br><span class="line">     50 |</span><br><span class="line">| s25301 | 张秋丽         | 男       |     18 |       1 | 北京           | s271816 |          77 |</span><br><span class="line">    82 |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           | s271819 |          56 |</span><br><span class="line">     48 |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+---------+-------------+---------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="1-3-子查询"><a href="#1-3-子查询" class="headerlink" title="1.3    子查询"></a>1.3    子查询</h2><p>语法</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法：<span class="keyword">select</span> 语句 <span class="keyword">where</span> 条件 (<span class="keyword">select</span> … <span class="keyword">from</span> 表)</span><br></pre></td></tr></table></figure>

<ol>
<li>外面的查询称为父查询，括号中的查询称为子查询</li>
<li>子查询为父查询提供查询条件</li>
</ol>
<h4 id="1-3-1-例题"><a href="#1-3-1-例题" class="headerlink" title="1.3.1    例题"></a>1.3.1    例题</h4><p>1、查找笔试80分的学生</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from stuinfo where stuno=(select stuno from stumarks where writtenexam=80);</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| s25303 | 李斯文       | 女      |     22 |       2 | 北京           |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br></pre></td></tr></table></figure>

<p>2、查找笔试最高分的学生</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一：</span></span><br><span class="line">mysql&gt; select * from stuinfo where stuno=(select stuno from stumarks order by writtenexam desc limit</span><br><span class="line"> 1);</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| s25303 | 李斯文       | 女      |     22 |       2 | 北京           |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二：</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> stuinfo <span class="keyword">where</span> stuno=(<span class="keyword">select</span> stuno <span class="keyword">from</span> stumarks <span class="keyword">where</span> writtenexam=(<span class="keyword">select</span> <span class="keyword">max</span>(writtenexam) <span class="keyword">from</span> stumarks));</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| s25303 | 李斯文       | 女      |     22 |       2 | 北京           |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">脚下留心：上面的例题，子查询只能返回一个值。如果子查询返回多个值就不能用“&#x3D;”了,需要用 in</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-in-not-in子查询"><a href="#1-3-2-in-not-in子查询" class="headerlink" title="1.3.2    in|not in子查询"></a>1.3.2    in|not in子查询</h4><p>用于子查询的返回结果多个值。</p>
<p>1、查找笔试成绩及格的同学</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from stuinfo where stuno in (select stuno from stumarks where writtenexam&gt;=60);</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| s25301 | 张秋丽         | 男       |     18 |       1 | 北京           |</span><br><span class="line">| s25303 | 李斯文        | 女      |     22 |       2 | 北京           |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |     28 |       4 | 天津           |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>2、查询不及格的同学</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from stuinfo where stuno  in (select stuno from stumarks where writtenexam&lt;=60);</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| s25302 | 李文才        | 男       |     31 |       3 | 上海          |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br></pre></td></tr></table></figure>

<p>3、查询没有通过的同学（不及格，缺考）</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from stuinfo where stuno  not in (select stuno from stumarks where writtenexam&gt;=60);</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| s25302 | 李文才        | 男       |     31 |       3 | 上海          |</span><br><span class="line">| s25305 | 诸葛丽丽         | 女      |     23 |       7 | 河南           |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           |</span><br><span class="line">| s25319 | 梅超风        | 女      |     23 |       5 | 河北          |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-3-exists和not-exists"><a href="#1-3-3-exists和not-exists" class="headerlink" title="1.3.3    exists和not exists"></a>1.3.3    exists和not exists</h4><p>1、    如果有人笔试超过80分就显示所有的学生</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from stuinfo where exists (select * from stumarks where writtenexam&gt;=80);</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| s25301 | 张秋丽         | 男       |     18 |       1 | 北京           |</span><br><span class="line">| s25302 | 李文才        | 男       |     31 |       3 | 上海          |</span><br><span class="line">| s25303 | 李斯文        | 女      |     22 |       2 | 北京           |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |     28 |       4 | 天津           |</span><br><span class="line">| s25305 | 诸葛丽丽         | 女      |     23 |       7 | 河南           |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           |</span><br><span class="line">| s25319 | 梅超风        | 女      |     23 |       5 | 河北          |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br></pre></td></tr></table></figure>

<p>2、    如果没有人超过80分就显示所有的学生</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from stuinfo where not exists (select * from stumarks where writtenexam&gt;=80);</span><br><span class="line">Empty <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-4-子查询分类"><a href="#1-3-4-子查询分类" class="headerlink" title="1.3.4    子查询分类"></a>1.3.4    子查询分类</h4><p>1、标量子查询：子查询返回的结果就一个</p>
<p>2、列子查询：子查询返回的结果是一个列表</p>
<p>3、行子查询：子查询返回的结果是一行</p>
<p>例题：查询成绩最高的男生和女生</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select stuname,stusex,ch from stu where (stusex,ch) in (select stusex,max(ch) from stu group by stusex);</span><br><span class="line">+<span class="comment">----------+--------+------+</span></span><br><span class="line">| stuname  | stusex | ch   |</span><br><span class="line">+<span class="comment">----------+--------+------+</span></span><br><span class="line">| 争青小子        | 男       |   86 |</span><br><span class="line">| Tabm     | 女      |   88 |</span><br><span class="line">+<span class="comment">----------+--------+------+</span></span><br></pre></td></tr></table></figure>

<p>4、表子查询：子查询返回的结果当成一个表</p>
<p>例题：查询成绩最高的男生和女生</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select stuname,stusex,ch from (select * from stu order by ch desc) as t group by stusex;</span><br><span class="line">+<span class="comment">----------+--------+------+</span></span><br><span class="line">| stuname  | stusex | ch   |</span><br><span class="line">+<span class="comment">----------+--------+------+</span></span><br><span class="line">| Tabm     | 女      |   88 |</span><br><span class="line">| 争青小子        | 男       |   86 |</span><br><span class="line">+<span class="comment">----------+--------+------+</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">脚下留心：from后面是一个表，如果子查询的结果当成表来看，必须将子查询的结果取别名。</span><br></pre></td></tr></table></figure>

<h2 id="1-4-视图【view】"><a href="#1-4-视图【view】" class="headerlink" title="1.4    视图【view】"></a>1.4    视图【view】</h2><p>1、    视图是一张虚拟表，它表示一张表的部分或多张表的综合的结构。</p>
<p>2、    视图仅仅是表结构，没有表数据。视图的结构和数据建立在表的基础上。</p>
<h4 id="1-4-1-创建视图"><a href="#1-4-1-创建视图" class="headerlink" title="1.4.1    创建视图"></a>1.4.1    创建视图</h4><p>语法</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> [<span class="keyword">or</span> <span class="keyword">replace</span>] <span class="keyword">view</span> 视图的名称</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">	<span class="keyword">select</span>语句</span><br></pre></td></tr></table></figure>

<p>例题：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create view vw_stu</span><br><span class="line">    -&gt; as</span><br><span class="line">    -&gt; select stuname,stusex,writtenexam,labexam from stuinfo inner join stumarks using(stuno);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多学一招：因为视图是一个表结构，所以创建视图后，会在数据库文件夹中多一个与视图名同名的.frm文件</span><br></pre></td></tr></table></figure>

<h4 id="1-4-2-使用视图"><a href="#1-4-2-使用视图" class="headerlink" title="1.4.2    使用视图"></a>1.4.2    使用视图</h4><p>视图是一张虚拟表，视图的用法和表的用法一样</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from vw_stu;</span><br><span class="line">+<span class="comment">----------+--------+-------------+---------+</span></span><br><span class="line">| stuname  | stusex | writtenexam | labexam |</span><br><span class="line">+<span class="comment">----------+--------+-------------+---------+</span></span><br><span class="line">| 李斯文        | 女      |          80 |      58 |</span><br><span class="line">| 李文才        | 男       |          50 |      90 |</span><br><span class="line">| 欧阳俊雄        | 男       |          65 |      50 |</span><br><span class="line">| 张秋丽         | 男       |          77 |      82 |</span><br><span class="line">| 争青小子        | 男       |          56 |      48 |</span><br><span class="line">+<span class="comment">----------+--------+-------------+---------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; update vw_stu set writtenexam=88 where stuname='李斯文';</span><br><span class="line">Query OK, 1 row affected (0.05 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br></pre></td></tr></table></figure>

<h4 id="1-4-3-查看视图的结构"><a href="#1-4-3-查看视图的结构" class="headerlink" title="1.4.3    查看视图的结构"></a>1.4.3    查看视图的结构</h4><p>语法：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc 视图名</span><br></pre></td></tr></table></figure>

<p>例题</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc vw_stu;</span><br><span class="line">+<span class="comment">-------------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field       | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| stuname     | varchar(10) | NO   |     | NULL    |       |</span><br><span class="line">| stusex      | char(2)     | NO   |     | NULL    |       |</span><br><span class="line">| writtenexam | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| labexam     | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-4-查看创建视图的语法"><a href="#1-4-4-查看创建视图的语法" class="headerlink" title="1.4.4    查看创建视图的语法"></a>1.4.4    查看创建视图的语法</h4><p>语法：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">view</span> 视图名</span><br></pre></td></tr></table></figure>

<p>例题</p>
<p> <img src="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537067071676.png"></p>
<h4 id="1-4-5-显示所有视图"><a href="#1-4-5-显示所有视图" class="headerlink" title="1.4.5    显示所有视图"></a>1.4.5    显示所有视图</h4> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#方法一：</span></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| Tables_in_itcast |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| stu              |</span><br><span class="line">| stuinfo          |</span><br><span class="line">| stumarks         |</span><br><span class="line">| t1               |</span><br><span class="line">| t2               |</span><br><span class="line">| vw_stu           |</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line">mysql&gt; select table_name from information_schema.views;</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| table_name |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| vw_stu     |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.05</span> sec)</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法三</span></span><br><span class="line">mysql&gt; <span class="keyword">show</span> <span class="keyword">table</span> <span class="keyword">status</span> <span class="keyword">where</span> <span class="keyword">comment</span>=<span class="string">'view'</span> \G</span><br><span class="line">*************************** <span class="number">1.</span> <span class="keyword">row</span> ***************************</span><br><span class="line">           <span class="keyword">Name</span>: vw_stu</span><br><span class="line">         <span class="keyword">Engine</span>: <span class="literal">NULL</span></span><br><span class="line">        <span class="keyword">Version</span>: <span class="literal">NULL</span></span><br><span class="line">     Row_format: <span class="literal">NULL</span></span><br><span class="line">           <span class="keyword">Rows</span>: <span class="literal">NULL</span></span><br><span class="line"> Avg_row_length: <span class="literal">NULL</span></span><br><span class="line">    Data_length: <span class="literal">NULL</span></span><br><span class="line">Max_data_length: <span class="literal">NULL</span></span><br><span class="line">   Index_length: <span class="literal">NULL</span></span><br><span class="line">      Data_free: <span class="literal">NULL</span></span><br><span class="line"> Auto_increment: <span class="literal">NULL</span></span><br><span class="line">    Create_time: <span class="literal">NULL</span></span><br><span class="line">    Update_time: <span class="literal">NULL</span></span><br><span class="line">     Check_time: <span class="literal">NULL</span></span><br><span class="line">      <span class="keyword">Collation</span>: <span class="literal">NULL</span></span><br><span class="line">       <span class="keyword">Checksum</span>: <span class="literal">NULL</span></span><br><span class="line"> Create_options: <span class="literal">NULL</span></span><br><span class="line">        <span class="keyword">Comment</span>: <span class="keyword">VIEW</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-4-6-更改视图"><a href="#1-4-6-更改视图" class="headerlink" title="1.4.6    更改视图"></a>1.4.6    更改视图</h4><p>语法：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> 视图名</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">	<span class="keyword">select</span> 语句</span><br></pre></td></tr></table></figure>

<p>例题：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter view vw_stu</span><br><span class="line">    -&gt; as</span><br><span class="line">    -&gt; select * from stuinfo;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-4-7-删除视图"><a href="#1-4-7-删除视图" class="headerlink" title="1.4.7    删除视图"></a>1.4.7    删除视图</h4><p>语法：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> [<span class="keyword">if</span> <span class="keyword">exists</span>] 视图<span class="number">1</span>,视图<span class="number">2</span>,…</span><br></pre></td></tr></table></figure>

<p>例题</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop view vw_stu;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-4-8-视图的作用"><a href="#1-4-8-视图的作用" class="headerlink" title="1.4.8    视图的作用"></a>1.4.8    视图的作用</h4><ol>
<li>筛选数据，防止未经许可访问敏感数据</li>
<li>隐藏表结构</li>
<li>降低SQL语句的复杂度</li>
</ol>
<h4 id="1-4-9-视图的算法"><a href="#1-4-9-视图的算法" class="headerlink" title="1.4.9    视图的算法"></a>1.4.9    视图的算法</h4><p>场景：找出语文成绩最高的男生和女生</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from (select * from stu order by ch desc) as t group by stusex;</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+------+------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress | ch   | math |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+------+------+</span></span><br><span class="line">| s25321 | Tabm     | 女      |     23 |       9 | 河北          |   88 |   77 |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           |   86 |   92 |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+------+------+</span></span><br></pre></td></tr></table></figure>

<p>我们可以将子查询封装到视图中</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create view vw_stu</span><br><span class="line">    -&gt; as</span><br><span class="line">    -&gt; select * from stu order by ch desc;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>可以将上面的子查询更改成视图，但是，结果和上面不一样</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from vw_stu group by stusex;</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+------+------+</span></span><br><span class="line">| stuNo  | stuName | stuSex | stuAge | stuSeat | stuAddress | ch   | math |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+------+------+</span></span><br><span class="line">| s25301 | 张秋丽        | 男       |     18 |       1 | 北京           |   80 | NULL |</span><br><span class="line">| s25303 | 李斯文       | 女      |     22 |       2 | 北京           |   55 |   82 |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+------+------+</span></span><br></pre></td></tr></table></figure>

<p>原因：这是因为视图的算法造成的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. merge：合并算法，将视图的语句和外层的语句合并后在执行。</span><br><span class="line">2. temptable：临时表算法，将视图生成一个临时表，再执行外层语句</span><br><span class="line">3. undefined：未定义，MySQL到底用merge还是用temptable由MySQL决定，这是一个默认的算法，一般视图都会选择merge算法，因为merge效率高。</span><br></pre></td></tr></table></figure>

<p>解决：在创建视图的时候指定视图的算法</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> algorithm=temptable <span class="keyword">view</span> 视图名</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">	<span class="keyword">select</span> 语句</span><br></pre></td></tr></table></figure>

<p>指定算法创建视图   </p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create algorithm=temptable view vw_stu</span><br><span class="line">    -&gt; as</span><br><span class="line">    -&gt;  select * from stu order by ch desc;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from vw_stu group by stusex;   # 结果是一致的</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+------+------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress | ch   | math |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+------+------+</span></span><br><span class="line">| s25321 | Tabm     | 女      |     23 |       9 | 河北          |   88 |   77 |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           |   86 |   92 |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+------+------+</span></span><br></pre></td></tr></table></figure>

<h2 id="1-5-事务【transaction】"><a href="#1-5-事务【transaction】" class="headerlink" title="1.5    事务【transaction】"></a>1.5    事务【transaction】</h2><ol>
<li>事务是一个不可分割的执行单元</li>
<li>事务作为一个整体要么一起执行，要么一起回滚</li>
</ol>
<p>插入测试数据</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table bank(</span><br><span class="line">    -&gt; cardid char(4) primary key,</span><br><span class="line">    -&gt; money int</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into bank values ('1001',1000),('1002',100);</span><br><span class="line">Query OK, 2 rows affected (0.00 sec)</span><br><span class="line">Records: 2  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>

<h4 id="1-5-1-事务操作"><a href="#1-5-1-事务操作" class="headerlink" title="1.5.1    事务操作"></a>1.5.1    事务操作</h4> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">开启事务：<span class="keyword">start</span> <span class="keyword">transaction</span>或<span class="keyword">begin</span> [<span class="keyword">work</span>]</span><br><span class="line">提交事务：<span class="keyword">commit</span></span><br><span class="line">回滚事务：<span class="keyword">rollback</span></span><br></pre></td></tr></table></figure>

<p>例题：</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delimiter //            # 更改定界符</span><br><span class="line"></span><br><span class="line">mysql&gt; start transaction;			# 开启事务</span><br><span class="line">    -&gt; update bank set money=money-100 where cardid='1001';</span><br><span class="line">    -&gt; update bank set money=money+100 where cardid='1002'  //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit //   # 提交事务</span><br><span class="line"></span><br><span class="line">mysql&gt; rollback //  # 回滚事务</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">思考：事务什么时候产生？什么时候结束？</span><br><span class="line">答：开启的时候产生，提交事务或回滚事务都结束</span><br><span class="line"></span><br><span class="line">脚下留心：只有innodb和BDB才支持事务，myisam不支持事务。</span><br></pre></td></tr></table></figure>

<h4 id="1-5-2-设置事务的回滚点"><a href="#1-5-2-设置事务的回滚点" class="headerlink" title="1.5.2      设置事务的回滚点"></a>1.5.2      设置事务的回滚点</h4><p>语法：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">设置回滚点： <span class="keyword">savepoint</span> 回滚点名</span><br><span class="line">回滚到回滚点： <span class="keyword">rollback</span> <span class="keyword">to</span> 回滚点</span><br></pre></td></tr></table></figure>

<p>例题：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;  start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into bank values ('1003',1000);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; savepoint aa;    # 设置回滚点 aa</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into bank values ('1004',500);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"> </span><br><span class="line">mysql&gt; savepoint bb;   # 设置回滚点bb</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"> </span><br><span class="line">mysql&gt; rollback to aa;    # 回滚到aa点</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;    # 提交事务</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from bank ;</span><br><span class="line">+<span class="comment">--------+-------+</span></span><br><span class="line">| cardid | money |</span><br><span class="line">+<span class="comment">--------+-------+</span></span><br><span class="line">| 1001   |   800 |</span><br><span class="line">| 1002   |   200 |</span><br><span class="line">| 1003   |  1000 |</span><br><span class="line">+<span class="comment">--------+-------+</span></span><br></pre></td></tr></table></figure>

<h4 id="1-5-3-事务的特性（ACID）"><a href="#1-5-3-事务的特性（ACID）" class="headerlink" title="1.5.3    事务的特性（ACID）"></a>1.5.3    事务的特性（ACID）</h4><ol>
<li>原子性（Atomicity）：事务是一个整体，不可以再分，要么一起执行，要么一起不执行。</li>
<li>一致性（Consistency）：事务完成时，数据必须处于一致的状态。</li>
<li>隔离性（Isolation）：每个事务都是相互隔离的</li>
<li>永久性（Durability）：事务完成后，对数据的修改是永久性的。</li>
</ol>
<h2 id="1-6-索引【index】"><a href="#1-6-索引【index】" class="headerlink" title="1.6    索引【index】"></a>1.6    索引【index】</h2><p>索引的优点：查询速度快</p>
<p>索引的缺点：</p>
<ol>
<li>增、删、改（数据操作语句）效率低了</li>
<li>索引占用空间</li>
</ol>
<h4 id="1-6-1-索引的类型"><a href="#1-6-1-索引的类型" class="headerlink" title="1.6.1    索引的类型"></a>1.6.1    索引的类型</h4><ol>
<li><p>普通索引</p>
</li>
<li><p>唯一索引（唯一键）</p>
</li>
<li><p>主键索引：只要主键就自动创建主键索引，不需要手动创建。</p>
</li>
<li><p>全文索引，搜索引擎使用，MySQL不支持中文的全文索引，我们通过sphinx去解决中文的全文索引。</p>
</li>
</ol>
<h4 id="1-6-2-创建普通索引【create-index】"><a href="#1-6-2-创建普通索引【create-index】" class="headerlink" title="1.6.2    创建普通索引【create index】"></a>1.6.2    创建普通索引【create index】</h4><p>语法：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> [索引名] <span class="keyword">on</span> 表名 （字段名）</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">index</span> [索引的名称] （列名）</span><br></pre></td></tr></table></figure>

<p>例题：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建索引方法一</span></span><br><span class="line">mysql&gt; create index ix_stuname on stuinfo(stuname);</span><br><span class="line">Query OK, 0 rows affected (0.08 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建索引方法二</span></span><br><span class="line">mysql&gt; alter table stuinfo add index ix_address (stuaddress);</span><br><span class="line">Query OK, 0 rows affected (0.08 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建表的时候就添加索引</span></span><br><span class="line">mysql&gt; create table emp(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(10),</span><br><span class="line">    -&gt; index ix_name (name)   # 创建索引</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-6-3-创建唯一索引"><a href="#1-6-3-创建唯一索引" class="headerlink" title="1.6.3    创建唯一索引"></a>1.6.3    创建唯一索引</h4> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法一：<span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名 （字段名）</span><br><span class="line">语法二：<span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> unqiue [<span class="keyword">index</span>] [索引的名称] （列名）</span><br><span class="line">语法三：创建表的时候添加唯一索引，和创建唯一键是一样的。</span><br></pre></td></tr></table></figure>

<p>例题</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一：</span></span><br><span class="line">mysql&gt; create unique index UQ_stuname on stu(stuname);</span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二：</span></span><br><span class="line">mysql&gt; alter table stu add unique UQ_address (stuaddress);</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法三</span></span><br><span class="line">mysql&gt; create table stu2(</span><br><span class="line">    -&gt; id int,</span><br><span class="line">    -&gt; name varchar(20),</span><br><span class="line">    -&gt; unique UQ_name(name)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-6-4-删除索引"><a href="#1-6-4-删除索引" class="headerlink" title="1.6.4    删除索引"></a>1.6.4    删除索引</h4><p>语法</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名</span><br></pre></td></tr></table></figure>

<p>例题</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop index ix_stuname on stuinfo;</span><br><span class="line">Query OK, 0 rows affected (0.03 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>

<h4 id="1-6-5-创建索引的指导原则"><a href="#1-6-5-创建索引的指导原则" class="headerlink" title="1.6.5    创建索引的指导原则"></a>1.6.5    创建索引的指导原则</h4><ol>
<li><p>该列用于频繁搜索</p>
</li>
<li><p>改列用于排序</p>
</li>
<li><p>公共字段要创建索引</p>
</li>
<li><p>如果表中的数据很少，不需要创建索引。MySQL搜索索引的时间比逐条搜索数据的时间要长。</p>
</li>
<li><p>如果一个字段上的数据只有几个不同的值，改字段不适合做索引，比如性别。</p>
</li>
</ol>
<h2 id="1-7-函数"><a href="#1-7-函数" class="headerlink" title="1.7  函数"></a>1.7  函数</h2><h4 id="1-7-1-数字类"><a href="#1-7-1-数字类" class="headerlink" title="1.7.1  数字类"></a>1.7.1  数字类</h4> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select rand();			# 生成随机数</span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">| rand()              |</span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">| 0.18474003969201822 |</span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> stuinfo <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">rand</span>();   <span class="comment"># 随机排序</span></span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stuinfo order by rand() limit 2;    # 随机抽两个学生</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| s25305 | 诸葛丽丽         | 女      |     23 |       7 | 河南           |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |     28 |       4 | 天津           |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">3.5</span>);     <span class="comment">#四舍五入</span></span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| round(3.5) |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">|          4 |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">ceil</span>(<span class="number">3.1</span>);	<span class="comment"># 向上取整</span></span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| ceil(3.1) |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">|         4 |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">floor</span>(<span class="number">3.9</span>);	<span class="comment"># 向下取整</span></span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| floor(3.9) |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">|          3 |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">truncate</span>(<span class="number">3.1415926</span>,<span class="number">3</span>);	<span class="comment"># 截取数字</span></span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| <span class="keyword">truncate</span>(<span class="number">3.1415926</span>,<span class="number">3</span>) |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">|                 <span class="number">3.141</span> |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-7-2-字符串类"><a href="#1-7-2-字符串类" class="headerlink" title="1.7.2 字符串类"></a>1.7.2 字符串类</h4> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ucase('i am a boy!');		# 转成大写</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">| ucase('i am a boy!') |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">| I AM A BOY!          |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">lcase</span>(<span class="string">'I Am A Boy!'</span>);		<span class="comment">#转成小写</span></span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">| lcase('I Am A Boy!') |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">| i am a boy!          |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">left</span>(<span class="string">'abcde'</span>,<span class="number">3</span>);		<span class="comment"># 从左边开始截取，截取3个</span></span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">| left('abcde',3) |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">| abc             |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">right</span>(<span class="string">'abcde'</span>,<span class="number">3</span>);		<span class="comment"># 从右边开始截取，截取3个</span></span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| right('abcde',3) |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| cde              |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">substring</span>(<span class="string">'abcde'</span>,<span class="number">2</span>,<span class="number">3</span>);	<span class="comment">#从第2个位置开始截取，截取3个【位置从1开始】</span></span><br><span class="line">+<span class="comment">------------------------+</span></span><br><span class="line">| substring('abcde',2,3) |</span><br><span class="line">+<span class="comment">------------------------+</span></span><br><span class="line">| bcd                    |</span><br><span class="line">+<span class="comment">------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">concat</span>(<span class="string">'中国'</span>,<span class="string">'上海'</span>);	<span class="comment"># 字符串相连</span></span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| concat('中国','上海')       |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| 中国上海                    |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">concat</span>(stuname,<span class="string">'-'</span>,stusex) <span class="keyword">from</span> stuinfo;  <span class="comment"># 将表中的姓名和性别连接起来</span></span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">| concat(stuname,'-',stusex) |</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">| 张秋丽-男                          |</span><br><span class="line">| 李文才-男                         |</span><br><span class="line">| 李斯文-女                        |</span><br><span class="line">| 欧阳俊雄-男                         |</span><br><span class="line">| 诸葛丽丽-女                         |</span><br><span class="line">| 争青小子-男                         |</span><br><span class="line">| 梅超风-女                        |</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">7 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># coalesce(字段1，字段2)  如果字段1不为空就显示字段1，否则，显示字段2</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> stuname,<span class="keyword">coalesce</span>(writtenexam,<span class="string">'缺考'</span>),<span class="keyword">coalesce</span>(labexam,<span class="string">'缺考'</span>) <span class="keyword">from</span> stuinfo <span class="keyword">natural</span> <span class="keyword">left</span> <span class="keyword">join</span> stumarks;   <span class="comment"># 将考试成绩为空的显示为缺考</span></span><br><span class="line">+<span class="comment">----------+------------------------------+--------------------------+</span></span><br><span class="line">| stuname  | coalesce(writtenexam,'缺考')    | coalesce(labexam,'缺考')    |</span><br><span class="line">+<span class="comment">----------+------------------------------+--------------------------+</span></span><br><span class="line">| 张秋丽         | 77                           | 82                       |</span><br><span class="line">| 李文才        | 50                           | 90                       |</span><br><span class="line">| 李斯文        | 88                           | 58                       |</span><br><span class="line">| 欧阳俊雄        | 65                           | 50                       |</span><br><span class="line">| 诸葛丽丽         | 缺考                            | 缺考                        |</span><br><span class="line">| 争青小子        | 56                           | 48                       |</span><br><span class="line">| 梅超风        | 缺考                            | 缺考                        |</span><br><span class="line">+<span class="comment">----------+------------------------------+--------------------------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; select length('锄禾日当午');		# 字节长度</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">| length('锄禾日当午')          |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">|                   10 |</span><br><span class="line">+<span class="comment">----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">char_length</span>(<span class="string">'锄禾日当午'</span>);		<span class="comment"># 字符个数</span></span><br><span class="line">+<span class="comment">---------------------------+</span></span><br><span class="line">| char_length('锄禾日当午')          |</span><br><span class="line">+<span class="comment">---------------------------+</span></span><br><span class="line">|                         5 |</span><br><span class="line">+<span class="comment">---------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-7-3-时间类"><a href="#1-7-3-时间类" class="headerlink" title="1.7.3 时间类"></a>1.7.3 时间类</h4> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select unix_timestamp();	#获取时间戳</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| unix_timestamp() |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">|       1537084508 |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> from_unixtime(<span class="keyword">unix_timestamp</span>());	<span class="comment"># 将时间戳转成年-月-日 小时:分钟:秒的格式</span></span><br><span class="line">+<span class="comment">---------------------------------+</span></span><br><span class="line">| from_unixtime(unix_timestamp()) |</span><br><span class="line">+<span class="comment">---------------------------------+</span></span><br><span class="line">| 2018-09-16 15:55:56             |</span><br><span class="line">+<span class="comment">---------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">now</span>();		<span class="comment"># 获取当前日期时间</span></span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">| now()               |</span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">| 2018-09-16 15:57:04 |</span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">year</span>(<span class="keyword">now</span>()) 年,<span class="keyword">month</span>(<span class="keyword">now</span>()) 月, <span class="keyword">day</span>(<span class="keyword">now</span>()) 日,<span class="keyword">hour</span>(<span class="keyword">now</span>()) 小,<span class="keyword">minute</span>(<span class="keyword">now</span>()) 分钟,<span class="keyword">second</span>(<span class="keyword">now</span>()) 秒;</span><br><span class="line">+<span class="comment">------+------+------+------+------+------+</span></span><br><span class="line">| 年     | 月     | 日     | 小时   | 分钟     | 秒     |</span><br><span class="line">+<span class="comment">------+------+------+------+------+------+</span></span><br><span class="line">| 2018 |    9 |   16 |   15 |   59 |   14 |</span><br><span class="line">+<span class="comment">------+------+------+------+------+------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">dayname</span>(<span class="keyword">now</span>()) 星期,monthname(<span class="keyword">now</span>()),<span class="keyword">dayofyear</span>(<span class="keyword">now</span>()) 本年的第几天;</span><br><span class="line">+<span class="comment">--------+------------------+--------------+</span></span><br><span class="line">| 星期       | monthname(now()) | 本年的第几天           |</span><br><span class="line">+<span class="comment">--------+------------------+--------------+</span></span><br><span class="line">| Sunday | September        |          259 |</span><br><span class="line">+<span class="comment">--------+------------------+--------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">datediff</span>(<span class="keyword">now</span>(),<span class="string">'2008-8-8'</span>);	<span class="comment"># 日期相减</span></span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">| datediff(now(),'2008-8-8') |</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">|                       3691 |</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">convert</span>(<span class="keyword">now</span>(),<span class="built_in">date</span>),<span class="keyword">convert</span>(<span class="keyword">now</span>(),<span class="built_in">time</span>);	<span class="comment"># 将now()转成日期和时间</span></span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| convert(now(),date) | convert(now(),time) |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| 2018-09-16          | 16:07:24            |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; select cast(now() as date),cast(now() as time);   # 将now()转成日期和时间</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| cast(now() as date) | cast(now() as time) |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| 2018-09-16          | 16:08:03            |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-7-4-加密函数"><a href="#1-7-4-加密函数" class="headerlink" title="1.7.4 加密函数"></a>1.7.4 加密函数</h4> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+<span class="comment">----------------------------------+------------------------------------------+</span></span><br><span class="line">| md5('root')                      | sha('root')                              |</span><br><span class="line">+<span class="comment">----------------------------------+------------------------------------------+</span></span><br><span class="line">| 63a9f0ea7bb98050796b649e85481845 | dc76e9f0c0006e8f919e0c515c66dbba3982f785 |</span><br><span class="line">+<span class="comment">----------------------------------+------------------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-7-5-判断函数"><a href="#1-7-5-判断函数" class="headerlink" title="1.7.5 判断函数"></a>1.7.5 判断函数</h4><p>语法</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(表达式,值1,值2)</span><br></pre></td></tr></table></figure>

<p>例题：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select if(10%2=0,'偶数','奇数');</span><br><span class="line">+<span class="comment">--------------------------+</span></span><br><span class="line">| if(10%2=0,'偶数','奇数')        |</span><br><span class="line">+<span class="comment">--------------------------+</span></span><br><span class="line">| 偶数                        |</span><br><span class="line">+<span class="comment">--------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 语文和数学都超过60分才通过</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> stuname,ch,math,<span class="keyword">if</span>(ch&gt;=<span class="number">60</span> &amp;&amp; math&gt;=<span class="number">60</span>,<span class="string">'通过'</span>,<span class="string">'不通过'</span>) <span class="string">'是否通过'</span> <span class="keyword">from</span> stu;</span><br><span class="line">+<span class="comment">----------+------+------+----------+</span></span><br><span class="line">| stuname  | ch   | math | 是否通过       |</span><br><span class="line">+<span class="comment">----------+------+------+----------+</span></span><br><span class="line">| 张秋丽         |   80 | NULL | 不通过        |</span><br><span class="line">| 李文才        |   77 |   76 | 通过        |</span><br><span class="line">| 李斯文        |   55 |   82 | 不通过        |</span><br><span class="line">| 欧阳俊雄        | NULL |   74 | 不通过        |</span><br><span class="line">| 诸葛丽丽         |   72 |   56 | 不通过        |</span><br><span class="line">| 争青小子        |   86 |   92 | 通过        |</span><br><span class="line">| 梅超风        |   74 |   67 | 通过        |</span><br><span class="line">| Tom      |   65 |   67 | 通过        |</span><br><span class="line">| Tabm     |   88 |   77 | 通过        |</span><br><span class="line">+<span class="comment">----------+------+------+----------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="1-8-预处理"><a href="#1-8-预处理" class="headerlink" title="1.8  预处理"></a>1.8  预处理</h2><p>预编译一次，可以多次执行。用来解决一条SQL语句频繁执行的问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">预处理语句：prepare 预处理名字 from ‘sql语句’</span><br><span class="line">执行预处理：execute 预处理名字 [using 变量]</span><br></pre></td></tr></table></figure>

<p>例题一：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; prepare stmt from 'select * from stuinfo';	# 创建预处理</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Statement prepared</span><br><span class="line"></span><br><span class="line">mysql&gt; execute stmt;	# 执行预处理</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| s25301 | 张秋丽         | 男       |     18 |       1 | 北京           |</span><br><span class="line">| s25302 | 李文才        | 男       |     31 |       3 | 上海          |</span><br><span class="line">| s25303 | 李斯文        | 女      |     22 |       2 | 北京           |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |     28 |       4 | 天津           |</span><br><span class="line">| s25305 | 诸葛丽丽         | 女      |     23 |       7 | 河南           |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           |</span><br><span class="line">| s25319 | 梅超风        | 女      |     23 |       5 | 河北          |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">7 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>例题二：传递参数</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delimiter // </span><br><span class="line">mysql&gt; prepare stmt from 'select * from stuinfo where stuno=?' // -- ?是位置占位符</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Statement prepared</span><br><span class="line"></span><br><span class="line">mysql&gt; set @id='s25301';       -- 变量以@开头，通过set给变量赋值</span><br><span class="line">    -&gt; execute stmt using @id //  -- 执行预处理，传递参数</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| s25301 | 张秋丽        | 男       |     18 |       1 | 北京           |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">脚下留心：</span><br><span class="line">1、?是位置占位符</span><br><span class="line">2、变量以@开头</span><br><span class="line">3、通过set给变量赋值</span><br></pre></td></tr></table></figure>

<p>例题三：传递多个参数</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; prepare stmt from 'select * from stuinfo where stusex=? and stuaddress=?'  //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Statement prepared</span><br><span class="line"></span><br><span class="line">mysql&gt; set @sex='男';</span><br><span class="line">    -&gt; set @addr='北京';</span><br><span class="line">    -&gt; execute stmt using @sex,@addr //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| s25301 | 张秋丽        | 男       |     18 |       1 | 北京           |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="1-9-存储过程【procedure】"><a href="#1-9-存储过程【procedure】" class="headerlink" title="1.9    存储过程【procedure】"></a>1.9    存储过程【procedure】</h2><h4 id="1-7-1-存储过程的优点"><a href="#1-7-1-存储过程的优点" class="headerlink" title="1.7.1    存储过程的优点"></a>1.7.1    存储过程的优点</h4><ol>
<li>存储过程可以减少网络流量</li>
<li>允许模块化设计</li>
<li>支持事务</li>
</ol>
<h4 id="1-7-2-创建存储过程"><a href="#1-7-2-创建存储过程" class="headerlink" title="1.7.2    创建存储过程"></a>1.7.2    创建存储过程</h4><p>语法：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> 存储过程名(参数)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	//<span class="keyword">sql</span>语句</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line">脚下留心：由于过程中有很多SQL语句，每个语句的结束都要用（；）结束。默认情况下，分号既表示语句结束，又表示向服务器发送SQL语句。我们希望分号仅表示语句的结束，不要将SQL语句发送到服务器执行，通过delimiter来更改结束符。</span><br></pre></td></tr></table></figure>

<p>例题</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delimiter //</span><br><span class="line">mysql&gt; create procedure proc()     -- 创建存储过程</span><br><span class="line">    -&gt; begin</span><br><span class="line">    -&gt; select * from stuinfo;</span><br><span class="line">    -&gt; end //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-7-3-调用存储过程"><a href="#1-7-3-调用存储过程" class="headerlink" title="1.7.3    调用存储过程"></a>1.7.3    调用存储过程</h4><p>语法：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> 存储过程名()</span><br></pre></td></tr></table></figure>

<p>例题：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; call proc() //     -- 调用存储过程</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| s25301 | 张秋丽         | 男       |     18 |       1 | 北京           |</span><br><span class="line">| s25302 | 李文才        | 男       |     31 |       3 | 上海          |</span><br><span class="line">| s25303 | 李斯文        | 女      |     22 |       2 | 北京           |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |     28 |       4 | 天津           |</span><br><span class="line">| s25305 | 诸葛丽丽         | 女      |     23 |       7 | 河南           |</span><br><span class="line">| s25318 | 争青小子        | 男       |     26 |       6 | 天津           |</span><br><span class="line">| s25319 | 梅超风        | 女      |     23 |       5 | 河北          |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">7 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-7-4-删除存储过程"><a href="#1-7-4-删除存储过程" class="headerlink" title="1.7.4    删除存储过程"></a>1.7.4    删除存储过程</h4><p>语法</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> [<span class="keyword">if</span> <span class="keyword">exists</span>] 存储过程名</span><br></pre></td></tr></table></figure>

<p>例题：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop procedure proc //    -- 删除存储过程</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-7-5-查看存储过程的信息"><a href="#1-7-5-查看存储过程的信息" class="headerlink" title="1.7.5  查看存储过程的信息"></a>1.7.5  查看存储过程的信息</h4> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">procedure</span> 存储过程名\G</span><br></pre></td></tr></table></figure>

<p>例题</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show create procedure proc \G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">           Procedure: proc</span><br><span class="line">            sql_mode: STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br><span class="line">    <span class="keyword">Create</span> <span class="keyword">Procedure</span>: <span class="keyword">CREATE</span> DEFINER=<span class="string">`root`</span>@<span class="string">`localhost`</span> <span class="keyword">PROCEDURE</span> <span class="string">`proc`</span>()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> stuinfo;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">character_set_client: gbk</span><br><span class="line">collation_connection: gbk_chinese_ci</span><br><span class="line">  <span class="keyword">Database</span> <span class="keyword">Collation</span>: utf8_general_ci</span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="1-7-6-显示所有的存储过程"><a href="#1-7-6-显示所有的存储过程" class="headerlink" title="1.7.6 显示所有的存储过程"></a>1.7.6 显示所有的存储过程</h4> <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show procedure status \G</span><br></pre></td></tr></table></figure>

<h4 id="1-7-7-存储过程的参数"><a href="#1-7-7-存储过程的参数" class="headerlink" title="1.7.7    存储过程的参数"></a>1.7.7    存储过程的参数</h4><p>存储过程的参数分为：输入参数（in）【默认】，输出参数（out），输入输出参数（inout）</p>
<p>存储过程不能使用return返回值，要返回值只能通过“输出参数”来向外传递值。</p>
<p>例题一：传递学号，获取对应的信息</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create procedure proc(in param varchar(10))   -- 输入参数</span><br><span class="line">    -&gt; select * from stuinfo where stuno=param //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; call proc('s25301') //</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">| s25301 | 张秋丽        | 男       |     18 |       1 | 北京           |</span><br><span class="line">+<span class="comment">--------+---------+--------+--------+---------+------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>例题二：查找同桌</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create procedure proc(name varchar(10))</span><br><span class="line">    -&gt; begin</span><br><span class="line">    -&gt; declare seat tinyint;   -- 声明局部变量</span><br><span class="line">    -&gt; select stuseat into seat from stuinfo where stuname=name;  -- 将座位号保存到变量中</span><br><span class="line">    -&gt; select * from stuinfo where stuseat=seat+1 or stuseat=seat-1;  -- 查找同桌</span><br><span class="line">    -&gt; end //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; call proc('李文才') //</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| stuNo  | stuName  | stuSex | stuAge | stuSeat | stuAddress |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">| s25303 | 李斯文        | 女      |     22 |       2 | 北京           |</span><br><span class="line">| s25304 | 欧阳俊雄        | 男       |     28 |       4 | 天津           |</span><br><span class="line">+<span class="comment">--------+----------+--------+--------+---------+------------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>强调</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、通过declare关键字声明局部变量；全局变量@开头就可以了</span><br><span class="line">2、给变量赋值有两种方法</span><br><span class="line">	方法一：set 变量名&#x3D;值</span><br><span class="line">	方法二：select 字段 into 变量 from 表 where 条件</span><br><span class="line">3、声明的变量不能与列名同名</span><br></pre></td></tr></table></figure>

<p>例题三：输出参数</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create procedure proc(num int, out result int)  //out 表示输出参数</span><br><span class="line">    -&gt; begin</span><br><span class="line">    -&gt; set result=num*num;</span><br><span class="line">    -&gt; end //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; call proc(10,@result) //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @result //</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| @result |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">|     100 |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<p>例题四：输入输出参数</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create procedure proc(inout num int)  #  inout 表示是输入输出参数</span><br><span class="line">    -&gt; begin</span><br><span class="line">    -&gt; set num=num*num;</span><br><span class="line">    -&gt; end //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; set @num=10;</span><br><span class="line">    -&gt; call proc(@num);</span><br><span class="line">    -&gt; select @num //</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| @num |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">|  100 |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h2 id="1-10-GO连接MySQL"><a href="#1-10-GO连接MySQL" class="headerlink" title="1.10 GO连接MySQL"></a>1.10 GO连接MySQL</h2><ol>
<li>因为Go语言没有提供任何官方数据库驱动，所以需要安装第三方函数库。 </li>
<li>由于在github上安装，所以需要安装git软件，安装过程一直点击下一步即可。安装完成后需要配置环境变量</li>
</ol>
<h4 id="1-10-1-安装git"><a href="#1-10-1-安装git" class="headerlink" title="1.10.1  安装git"></a>1.10.1  安装git</h4><p>git软件</p>
<p> <img src="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537011074242.png"></p>
<p>安装完毕后，配置git的环境变量，这样可以使用<code>get</code>的指令</p>
<p> <img src="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537094210154.png"></p>
<h4 id="1-10-2-安装数据库驱动"><a href="#1-10-2-安装数据库驱动" class="headerlink" title="1.10.2  安装数据库驱动"></a>1.10.2  安装数据库驱动</h4><p>设置GOPATH的环境变量，这样驱动才会下载到项目根目录中。</p>
<p> <img src="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537094342573.png">****</p>
<p>在cmd命令窗口中输入如下命令安装驱动</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> get github.com/<span class="keyword">go</span>-sql-driver/mysql</span><br><span class="line"></span><br><span class="line">这一命令会从代码中获取驱动的具体代码，并将这些代码放置到包库中，当需要用到驱动的时候，编译器会把驱动代码与用户编写的代码一同编译。</span><br></pre></td></tr></table></figure>

<p>安装完毕后，会在GOPATH下看到下载的驱动</p>
<p> <img src="https://raw.githubusercontent.com/Bogon/mysql_manual/main/4images/1537011722807.png"></p>
<h4 id="1-10-3-连接数据库"><a href="#1-10-3-连接数据库" class="headerlink" title="1.10.3  连接数据库"></a>1.10.3  连接数据库</h4><p>1、在src目录下创建demo.go文件，导入数据库驱动</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"database/sql"</span></span><br><span class="line">	_ <span class="string">"github.com/go-sql-driver/mysql"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">注意：程序在操作数据库的时候只需要用到database/sql，而不需要直接使用数据库驱动，所以程序在导入数据库驱动的时候将这个包的名字设置成下划线。</span><br></pre></td></tr></table></figure>

<p>2、通过sql.open()连接数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sql.open(驱动名,数据源dsn)(*DB,err)</span><br><span class="line"></span><br><span class="line">数据源语法：&quot;用户名:密码@[连接方式](主机名:端口号)&#x2F;数据库名&quot;</span><br><span class="line"></span><br><span class="line">注意：open()在执行时不会真正的与数据库进行连接，只是设置连接数据库需要的参数</span><br><span class="line">ping()方法才是连接数据库</span><br></pre></td></tr></table></figure>

<p>3、执行SQL语句</p>
<p>​    创建测试表</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table stu(</span><br><span class="line">    -&gt; id int primary key,</span><br><span class="line">    -&gt; name varchar(10)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br></pre></td></tr></table></figure>

<p>操作数据</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	"database/sql"</span><br><span class="line">	_ "github.com/go-sql-driver/mysql"</span><br><span class="line">	"fmt"</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	//"用户名:密码@[连接方式](主机名:端口号)/数据库名"</span><br><span class="line">	db,_:=sql.Open("mysql","root:root@(127.0.0.1:3306)/itcast") // 设置连接数据库的参数</span><br><span class="line">	defer db.Close()	//关闭数据库</span><br><span class="line">	err:=db.Ping()		//连接数据库</span><br><span class="line">	if err!=nil&#123;</span><br><span class="line">		fmt.Println("数据库连接失败")</span><br><span class="line">		return</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//操作一：执行数据操作语句</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	sql:="insert into stu values (2,'berry')"</span></span><br><span class="line"><span class="comment">	result,_:=db.Exec(sql)		//执行SQL语句</span></span><br><span class="line"><span class="comment">	n,_:=result.RowsAffected();	//获取受影响的记录数</span></span><br><span class="line"><span class="comment">	fmt.Println("受影响的记录数是",n)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	//操作二：执行预处理</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	stu:=[2][2] string&#123;&#123;"3","ketty"&#125;,&#123;"4","rose"&#125;&#125;</span></span><br><span class="line"><span class="comment">	stmt,_:=db.Prepare("insert into stu values (?,?)")		//获取预处理语句对象</span></span><br><span class="line"><span class="comment">	for _,s:=range stu&#123;</span></span><br><span class="line"><span class="comment">		stmt.Exec(s[0],s[1])			//调用预处理语句</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	//操作三：单行查询</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	var id,name string</span></span><br><span class="line"><span class="comment">	rows:=db.QueryRow("select * from stu where id=4")   //获取一行数据</span></span><br><span class="line"><span class="comment">	rows.Scan(&amp;id,&amp;name)		//将rows中的数据存到id,name中</span></span><br><span class="line"><span class="comment">	fmt.Println(id,"--",name)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	//操作四：多行查询</span><br><span class="line">	rows,_:=db.Query("<span class="keyword">select</span> * <span class="keyword">from</span> stu<span class="string">")		//获取所有数据</span></span><br><span class="line"><span class="string">	var id,name string</span></span><br><span class="line"><span class="string">	for rows.Next()&#123;		//循环显示所有的数据</span></span><br><span class="line"><span class="string">		rows.Scan(&amp;id,&amp;name)</span></span><br><span class="line"><span class="string">		fmt.Println(id,"</span><span class="comment">--",name)</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-11-作业"><a href="#1-11-作业" class="headerlink" title="1.11  作业"></a>1.11  作业</h2><p>1、    显示地区及每个地区参加考试的人数，并按人数降序排列。</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> stuaddress,<span class="keyword">count</span>(writtenexam) c <span class="keyword">from</span> stuinfo <span class="keyword">left</span> <span class="keyword">join</span> stumarks <span class="keyword">using</span>(stuno) <span class="keyword">group</span> <span class="keyword">by</span> stuaddress <span class="keyword">order</span> <span class="keyword">by</span> c <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<p>2、    显示有学生参加考试的地区</p>
<p>方法一：过滤</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> stuaddress,<span class="keyword">count</span>(writtenexam) c <span class="keyword">from</span> stuinfo <span class="keyword">left</span> <span class="keyword">join</span> stumarks <span class="keyword">using</span>(stuno) <span class="keyword">group</span> <span class="keyword">by</span> stuaddress <span class="keyword">having</span> c&gt;<span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>方法二：链接查询</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> stuaddress c <span class="keyword">from</span> stuinfo <span class="keyword">right</span> <span class="keyword">join</span> stumarks <span class="keyword">using</span>(stuno) ;</span><br></pre></td></tr></table></figure>

<p>3、    显示男生和女生的人数</p>
<p>方法一：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> stusex,<span class="keyword">count</span>() <span class="keyword">from</span> stuinfo <span class="keyword">where</span> stusex=<span class="string">'男'</span> <span class="keyword">union</span> <span class="keyword">select</span> stusex,<span class="keyword">count</span>() <span class="keyword">from</span> stuinfo <span class="keyword">where</span> stusex=<span class="string">'女'</span>;</span><br></pre></td></tr></table></figure>

<p>方法二：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(stusex=<span class="string">'男'</span>) 男,<span class="keyword">sum</span>(stusex=<span class="string">'女'</span>) 女 <span class="keyword">from</span> stuinfo;</span><br></pre></td></tr></table></figure>

<p>4、    显示每个地区的男生和女生和总人数</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> stuaddress,<span class="keyword">count</span>(stusex) 总人数, <span class="keyword">sum</span>(stusex=<span class="string">'男'</span>) 男,<span class="keyword">sum</span>(stusex=<span class="string">'女'</span>) 女 <span class="keyword">from</span> stuinfo <span class="keyword">group</span> <span class="keyword">by</span> stuaddress</span><br></pre></td></tr></table></figure>




    </div>

    
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- bottom ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5714801576974230"
     data-ad-slot="5659053341"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <div class="reward-container">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="Char 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="Char 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5eacc50f0dcd8169" async="async"></script>
  </div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Char
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://www.xuebaonline.com/MySQL-%E8%A7%86%E5%9B%BE%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E7%B4%A2%E5%BC%95%E3%80%81%E5%87%BD%E6%95%B0%E3%80%81GO%E8%BF%9E%E6%8E%A5MySQL/" title="MySQL-视图、事务、索引、函数、GO连接MySQL">https://www.xuebaonline.com/MySQL-视图、事务、索引、函数、GO连接MySQL/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/Bogon">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/images/connectme.JPG">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/MySQL/" rel="tag"><i class="fa fa-tag"></i> MySQL</a>
              <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"><i class="fa fa-tag"></i> 数据库</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/MySQL-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E5%92%8C%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5/" rel="prev" title="MySQL-数据库设计和查询语句">
      <i class="fa fa-chevron-left"></i> MySQL-数据库设计和查询语句
    </a></div>
      <div class="post-nav-item">
    <a href="/xcode%20%E5%B8%B8%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE/" rel="next" title="xcode 常用的快捷键">
      xcode 常用的快捷键 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-目标"><span class="nav-number">1.</span> <span class="nav-text">1.1  目标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-多表查询分类"><span class="nav-number">2.</span> <span class="nav-text">1.2    多表查询分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-1-内连接【inner-join】"><span class="nav-number">2.0.1.</span> <span class="nav-text">1.2.1    内连接【inner join】</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-2-左外连接【left-join】"><span class="nav-number">2.0.2.</span> <span class="nav-text">1.2.2    左外连接【left join】</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-3-右外连接【right-join】"><span class="nav-number">2.0.3.</span> <span class="nav-text">1.2.3    右外连接【right join】</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-4-交叉连接【cross-join】"><span class="nav-number">2.0.4.</span> <span class="nav-text">1.2.4    交叉连接【cross join】</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-5-自然连接【natural】"><span class="nav-number">2.0.5.</span> <span class="nav-text">1.2.5    自然连接【natural】</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-6-using"><span class="nav-number">2.0.6.</span> <span class="nav-text">1.2.6    using()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-子查询"><span class="nav-number">3.</span> <span class="nav-text">1.3    子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-1-例题"><span class="nav-number">3.0.1.</span> <span class="nav-text">1.3.1    例题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-2-in-not-in子查询"><span class="nav-number">3.0.2.</span> <span class="nav-text">1.3.2    in|not in子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-3-exists和not-exists"><span class="nav-number">3.0.3.</span> <span class="nav-text">1.3.3    exists和not exists</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-4-子查询分类"><span class="nav-number">3.0.4.</span> <span class="nav-text">1.3.4    子查询分类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-视图【view】"><span class="nav-number">4.</span> <span class="nav-text">1.4    视图【view】</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-1-创建视图"><span class="nav-number">4.0.1.</span> <span class="nav-text">1.4.1    创建视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-2-使用视图"><span class="nav-number">4.0.2.</span> <span class="nav-text">1.4.2    使用视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-3-查看视图的结构"><span class="nav-number">4.0.3.</span> <span class="nav-text">1.4.3    查看视图的结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-4-查看创建视图的语法"><span class="nav-number">4.0.4.</span> <span class="nav-text">1.4.4    查看创建视图的语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-5-显示所有视图"><span class="nav-number">4.0.5.</span> <span class="nav-text">1.4.5    显示所有视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-6-更改视图"><span class="nav-number">4.0.6.</span> <span class="nav-text">1.4.6    更改视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-7-删除视图"><span class="nav-number">4.0.7.</span> <span class="nav-text">1.4.7    删除视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-8-视图的作用"><span class="nav-number">4.0.8.</span> <span class="nav-text">1.4.8    视图的作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-9-视图的算法"><span class="nav-number">4.0.9.</span> <span class="nav-text">1.4.9    视图的算法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-事务【transaction】"><span class="nav-number">5.</span> <span class="nav-text">1.5    事务【transaction】</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-1-事务操作"><span class="nav-number">5.0.1.</span> <span class="nav-text">1.5.1    事务操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-2-设置事务的回滚点"><span class="nav-number">5.0.2.</span> <span class="nav-text">1.5.2      设置事务的回滚点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-3-事务的特性（ACID）"><span class="nav-number">5.0.3.</span> <span class="nav-text">1.5.3    事务的特性（ACID）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-索引【index】"><span class="nav-number">6.</span> <span class="nav-text">1.6    索引【index】</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-6-1-索引的类型"><span class="nav-number">6.0.1.</span> <span class="nav-text">1.6.1    索引的类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-6-2-创建普通索引【create-index】"><span class="nav-number">6.0.2.</span> <span class="nav-text">1.6.2    创建普通索引【create index】</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-6-3-创建唯一索引"><span class="nav-number">6.0.3.</span> <span class="nav-text">1.6.3    创建唯一索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-6-4-删除索引"><span class="nav-number">6.0.4.</span> <span class="nav-text">1.6.4    删除索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-6-5-创建索引的指导原则"><span class="nav-number">6.0.5.</span> <span class="nav-text">1.6.5    创建索引的指导原则</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-7-函数"><span class="nav-number">7.</span> <span class="nav-text">1.7  函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-1-数字类"><span class="nav-number">7.0.1.</span> <span class="nav-text">1.7.1  数字类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-2-字符串类"><span class="nav-number">7.0.2.</span> <span class="nav-text">1.7.2 字符串类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-3-时间类"><span class="nav-number">7.0.3.</span> <span class="nav-text">1.7.3 时间类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-4-加密函数"><span class="nav-number">7.0.4.</span> <span class="nav-text">1.7.4 加密函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-5-判断函数"><span class="nav-number">7.0.5.</span> <span class="nav-text">1.7.5 判断函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-8-预处理"><span class="nav-number">8.</span> <span class="nav-text">1.8  预处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-9-存储过程【procedure】"><span class="nav-number">9.</span> <span class="nav-text">1.9    存储过程【procedure】</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-1-存储过程的优点"><span class="nav-number">9.0.1.</span> <span class="nav-text">1.7.1    存储过程的优点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-2-创建存储过程"><span class="nav-number">9.0.2.</span> <span class="nav-text">1.7.2    创建存储过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-3-调用存储过程"><span class="nav-number">9.0.3.</span> <span class="nav-text">1.7.3    调用存储过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-4-删除存储过程"><span class="nav-number">9.0.4.</span> <span class="nav-text">1.7.4    删除存储过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-5-查看存储过程的信息"><span class="nav-number">9.0.5.</span> <span class="nav-text">1.7.5  查看存储过程的信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-6-显示所有的存储过程"><span class="nav-number">9.0.6.</span> <span class="nav-text">1.7.6 显示所有的存储过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-7-存储过程的参数"><span class="nav-number">9.0.7.</span> <span class="nav-text">1.7.7    存储过程的参数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-10-GO连接MySQL"><span class="nav-number">10.</span> <span class="nav-text">1.10 GO连接MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-10-1-安装git"><span class="nav-number">10.0.1.</span> <span class="nav-text">1.10.1  安装git</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-10-2-安装数据库驱动"><span class="nav-number">10.0.2.</span> <span class="nav-text">1.10.2  安装数据库驱动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-10-3-连接数据库"><span class="nav-number">10.0.3.</span> <span class="nav-text">1.10.3  连接数据库</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-11-作业"><span class="nav-number">11.</span> <span class="nav-text">1.11  作业</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Char"
      src="http://cdn.xuebaonline.com/blog_avatar.JPG">
  <p class="site-author-name" itemprop="name">Char</p>
  <div class="site-description" itemprop="description">曾经沧海难为水，除却巫山不是云。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">176</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">67</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">143</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="sidebar-button motion-element">
    <a onclick="Chatra('openChat', true);"><i class="fa fa-comment"></i>
    联系我
  </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Bogon" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Bogon" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhangqixcu@gmail.com" title="E-Mail → mailto:zhangqixcu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5640441479" title="新浪微博 → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5640441479" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/bogonbug" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;bogonbug" rel="noopener" target="_blank"><i class="fab fa-skype fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Bogon" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;Bogon" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/4368897/qizhang" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;4368897&#x2F;qizhang" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i></a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      推荐阅读
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://developer.apple.com/swift/" title="https:&#x2F;&#x2F;developer.apple.com&#x2F;swift&#x2F;" rel="noopener" target="_blank">Swift 5.4</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://developer.apple.com/documentation/objectivec" title="https:&#x2F;&#x2F;developer.apple.com&#x2F;documentation&#x2F;objectivec" rel="noopener" target="_blank">Objective-C</a>
        </li>
    </ul>
  </div>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- side ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5714801576974230"
     data-ad-slot="8285216682"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">豫ICP备20011156号-1 </a>
      <img src="/images/beian.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41172402000135" rel="noopener" target="_blank">豫公网安备41172402000135号 </a>
  </div>

<div class="copyright">
  
  &copy; 2021 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Char</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">博客全站共1.5m字</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">23:05</span>
</div>

<!--
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5eacc50f0dcd8169" async="async"></script>
  </div>
-->

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>




  <script>
    (function(d, w, c) {
      w.ChatraID = 'PxGFNHLgjQ3C3Hmpo';
      var s = d.createElement('script');
      w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments);
      };
      s.async = true;
      s.src = 'https://call.chatra.io/chatra.js';
      if (d.head) d.head.appendChild(s);
    })(document, window, 'Chatra');
  </script>









  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'rfRdmQpsk2Crnz747tDDOu26-gzGzoHsz',
      appKey     : 'eyu1k9BeINgR5FuXzbc969UA',
      placeholder: "写出你的想法……",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>