<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
<script data-ad-client="ca-pub-5714801576974230" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="G0fHOrfJn5sHWzmi6ZCcg2aX83myBc-9U1BJZJJDSTU">
  <meta name="baidu-site-verification" content="7gJOLignE2">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.xuebaonline.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>


  <meta name="description" content="Vaporç³»åˆ— (ä¸‰) : ä½¿ç”¨Leafæ„å»ºç½‘ç«™">
<meta property="og:type" content="article">
<meta property="og:title" content="Vaporç³»åˆ— (ä¸‰) : ä½¿ç”¨Leafæ„å»ºç½‘ç«™">
<meta property="og:url" content="https://www.xuebaonline.com/Vapor%E7%B3%BB%E5%88%97%20(%E4%B8%89)%20:%20%E4%BD%BF%E7%94%A8Leaf%E6%9E%84%E5%BB%BA%E7%BD%91%E7%AB%99/index.html">
<meta property="og:site_name" content="Char&#39;s Blog">
<meta property="og:description" content="Vaporç³»åˆ— (ä¸‰) : ä½¿ç”¨Leafæ„å»ºç½‘ç«™">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://cdn.xuebaonline.com/vapor-3-stp1.png">
<meta property="og:image" content="http://cdn.xuebaonline.com/vapor-3-stp2.png">
<meta property="og:image" content="http://cdn.xuebaonline.com/vapor-3-stp3.png">
<meta property="og:image" content="http://cdn.xuebaonline.com/vapor-3-stp4.png">
<meta property="og:image" content="http://cdn.xuebaonline.com/vapor-3-stp5.png">
<meta property="og:image" content="http://cdn.xuebaonline.com/vapor-3-stp6.png">
<meta property="article:published_time" content="2020-06-21T13:11:47.000Z">
<meta property="article:modified_time" content="2021-12-18T11:29:26.205Z">
<meta property="article:author" content="Char">
<meta property="article:tag" content="iOS">
<meta property="article:tag" content="Swift">
<meta property="article:tag" content="Swift Vapor">
<meta property="article:tag" content="Swiftå­¦ä¹ ">
<meta property="article:tag" content="Swiftè¿›é˜¶">
<meta property="article:tag" content="Protocols">
<meta property="article:tag" content="åè®®ç¼–ç¨‹">
<meta property="article:tag" content="æ³›å‹">
<meta property="article:tag" content="ç¼–ç¨‹">
<meta property="article:tag" content="å¤šæ€">
<meta property="article:tag" content="Collection Types">
<meta property="article:tag" content="Arrays">
<meta property="article:tag" content="Dictionaries">
<meta property="article:tag" content="Sets">
<meta property="article:tag" content="ä½¿ç”¨é—­åŒ…é›†åˆè¿­ä»£">
<meta property="article:tag" content="Strings">
<meta property="article:tag" content="æ„å»ºè‡ªå·±çš„ç±»å‹">
<meta property="article:tag" content="Structures">
<meta property="article:tag" content="ç»“æ„ä½“">
<meta property="article:tag" content="Methods">
<meta property="article:tag" content="Classes">
<meta property="article:tag" content="Enumerations">
<meta property="article:tag" content="Protocols">
<meta property="article:tag" content="Generics">
<meta property="article:tag" content="è®¿é—®æ§åˆ¶å’Œä»£ç ç»„ç»‡">
<meta property="article:tag" content="è‡ªå®šä¹‰è¿ç®—ç¬¦ï¼Œä¸‹æ ‡å’Œé”®è·¯å¾„">
<meta property="article:tag" content="æ¨¡å¼åŒ¹é…">
<meta property="article:tag" content="é”™è¯¯å¤„ç†">
<meta property="article:tag" content="Encoding å’Œ Decoding Types">
<meta property="article:tag" content="å†…å­˜ç®¡ç†">
<meta property="article:tag" content="å€¼ç±»å‹å’Œå€¼è¯­ä¹‰">
<meta property="article:tag" content="é¢å‘åè®®ç¼–ç¨‹(OOP)">
<meta property="article:tag" content="é«˜çº§åè®®å’Œæ³›å‹">
<meta property="article:tag" content="Vapor4.0">
<meta property="article:tag" content="Hello Vapor">
<meta property="article:tag" content="Leaf">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://cdn.xuebaonline.com/vapor-3-stp1.png">

<link rel="canonical" href="https://www.xuebaonline.com/Vapor%E7%B3%BB%E5%88%97%20(%E4%B8%89)%20:%20%E4%BD%BF%E7%94%A8Leaf%E6%9E%84%E5%BB%BA%E7%BD%91%E7%AB%99/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<script data-ad-client="ca-pub-5714801576974230" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <title>Vaporç³»åˆ— (ä¸‰) : ä½¿ç”¨Leafæ„å»ºç½‘ç«™ | Char's Blog</title>
  
    <script>
      function sendPageView() {
        if (CONFIG.hostname !== location.hostname) return;
        var uid = localStorage.getItem('uid') || (Math.random() + '.' + Math.random());
        localStorage.setItem('uid', uid);
        navigator.sendBeacon('https://www.google-analytics.com/collect', new URLSearchParams({
          v  : 1,
          tid: 'UA-165583776-1',
          cid: uid,
          t  : 'pageview',
          dp : encodeURIComponent(location.pathname)
        }));
      }
      document.addEventListener('pjax:complete', sendPageView);
      sendPageView();
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f44aa1d26d8ba6a20c1a09a9cdcd7e3d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Char's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Char's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">å¦‚åˆ‡å¦‚ç£‹ï¼Œå¦‚ç¢å¦‚ç£¨ã€‚</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">144</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">70</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">179</span></a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>æ—¥ç¨‹è¡¨</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.xuebaonline.com/Vapor%E7%B3%BB%E5%88%97%20(%E4%B8%89)%20:%20%E4%BD%BF%E7%94%A8Leaf%E6%9E%84%E5%BB%BA%E7%BD%91%E7%AB%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://cdn.xuebaonline.com/blog_avatar.JPG">
      <meta itemprop="name" content="Char">
      <meta itemprop="description" content="æ›¾ç»æ²§æµ·éš¾ä¸ºæ°´ï¼Œé™¤å´å·«å±±ä¸æ˜¯äº‘ã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Char's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Vaporç³»åˆ— (ä¸‰) : ä½¿ç”¨Leafæ„å»ºç½‘ç«™
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-06-21 21:11:47" itemprop="dateCreated datePublished" datetime="2020-06-21T21:11:47+08:00">2020-06-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vapor-4-0/" itemprop="url" rel="index"><span itemprop="name">Vapor 4.0</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/Vapor%E7%B3%BB%E5%88%97%20(%E4%B8%89)%20:%20%E4%BD%BF%E7%94%A8Leaf%E6%9E%84%E5%BB%BA%E7%BD%91%E7%AB%99/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/Vapor%E7%B3%BB%E5%88%97%20(%E4%B8%89)%20:%20%E4%BD%BF%E7%94%A8Leaf%E6%9E%84%E5%BB%BA%E7%BD%91%E7%AB%99/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>18k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>16 åˆ†é’Ÿ</span>
            </span>
            <div class="post-description">Vaporç³»åˆ— (ä¸‰) : ä½¿ç”¨Leafæ„å»ºç½‘ç«™</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Leafæ¨¡æ¿å¼•æ“æ„å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç½‘ç«™ã€‚ æˆ‘ä»¬å°†ç¼–å†™ä¸€äº›åŸºæœ¬çš„HTMLå’ŒCSSä»£ç ï¼Œå¹¶å­¦ä¹ å¦‚ä½•ä½¿ç”¨ä¸Šä¸‹æ–‡å°†Swiftå¯¹è±¡ä¸æ¨¡æ¿å¼•æ“è¿æ¥ã€‚ æ‚¨å°†äº†è§£ä½¿ç”¨å˜é‡ï¼Œæ¡ä»¶ï¼Œå¦‚ä½•éå†å¯¹è±¡çš„Leafæ–‡ä»¶çš„è¯­æ³•ï¼Œæˆ‘ä»¬å°†æ‰©å±•åŸºæœ¬æ¨¡æ¿ä»¥ä¸ºæˆ‘ä»¬çš„ç½‘ç«™æä¾›å¯é‡ç”¨çš„æ¡†æ¶ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨å¸–å­åˆ—è¡¨å’Œè¯¦ç»†ä¿¡æ¯é¡µé¢æ„å»ºåšå®¢å¸ƒå±€ã€‚</p>
<h1 id="ä»Leafå¼€å§‹"><a href="#ä»Leafå¼€å§‹" class="headerlink" title="ä»Leafå¼€å§‹"></a>ä»Leafå¼€å§‹</h1><p>Leafæ˜¯ä¸€ä¸ªè½»é‡çº§ä½†åŠŸèƒ½å¼ºå¤§çš„æ¨¡æ¿å¼•æ“ï¼Œå…·æœ‰å—Swiftå¯å‘çš„è¯­æ³•ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å®ƒä¸ºå‰ç«¯ç½‘ç«™ç”ŸæˆåŠ¨æ€HTMLé¡µé¢ã€‚ ä½¿ç”¨æ¨¡æ¿å¼•æ“æœ‰å…¶è‡ªèº«çš„ä¼˜åŠ¿ï¼Œé¦–å…ˆæ‚¨ä¸å¿…å°†Swiftä»£ç ä¸HTMLï¼ŒCSSç”šè‡³JavaScriptä»£ç æ··åˆä½¿ç”¨ã€‚ åˆ†ç¦»è§†å›¾å±‚æ€»æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œä½†è¿™ä¹Ÿæ„å‘³ç€æ‚¨å¯ä»¥å®ç°åŒä¸€äº‹ç‰©çš„å¤šä¸ªè§†å›¾ã€‚ æ‚¨å¯ä»¥ä¸ºæ‚¨çš„ç½‘ç«™æä¾›ä¸»é¢˜æ”¯æŒã€‚ é€šè¿‡åˆ›å»ºLeafæ¨¡æ¿ï¼Œæ‚¨è¿˜å¿…é¡»ç¼–å†™è®¸å¤šHTMLä»£ç ã€‚ å¦‚æœæ‚¨å·²ç»ç†Ÿæ‚‰HTMLï¼Œé‚£ä¹ˆæ‚¨ä¼šå‘ç°Leaféå¸¸æ˜“äºå­¦ä¹ å’Œä½¿ç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œå¦‚æœè¿˜æ²¡æœ‰ï¼Œè¯·ä½¿ç”¨Vaporå·¥å…·ç®±ç”Ÿæˆä¸€ä¸ªæ–°é¡¹ç›®ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å°†LeafåŒ…ä½œä¸ºä¾èµ–é¡¹æ·»åŠ åˆ°Package.swiftæ–‡ä»¶ä¸­ï¼š</p>
<a id="more"></a>


<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Package.swift *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// swift-tools-version:5.2</span></span><br><span class="line"><span class="keyword">import</span> PackageDescription</span><br><span class="line"><span class="keyword">let</span> package = <span class="type">Package</span>( </span><br><span class="line">    name: <span class="string">"leafProject"</span>, platforms: [</span><br><span class="line">    .macOS(.v10_15) ],</span><br><span class="line">    dependencies: [</span><br><span class="line">        <span class="comment">// ğŸ’§ A server-side Swift web framework.</span></span><br><span class="line">        .package(url: <span class="string">"https://github.com/vapor/vapor.git"</span>, from: <span class="string">"4.5.0"</span>), </span><br><span class="line">        .package(url: <span class="string">"https://github.com/vapor/leaf.git"</span>, from: <span class="string">"4.0.0-rc.1"</span>),</span><br><span class="line">    ], </span><br><span class="line">    targets: [</span><br><span class="line">        .target(name: <span class="string">"App"</span>, dependencies: [ </span><br><span class="line">            .product(name: <span class="string">"Vapor"</span>, package: <span class="string">"vapor"</span>), </span><br><span class="line">            .product(name: <span class="string">"Leaf"</span>, package: <span class="string">"leaf"</span>),</span><br><span class="line">    ]),</span><br><span class="line">    .target(name: <span class="string">"Run"</span>, dependencies: [<span class="string">"App"</span>]), </span><br><span class="line">        .testTarget(name: <span class="string">"AppTests"</span>, dependencies: [</span><br><span class="line">        .target(name: <span class="string">"App"</span>),</span><br><span class="line">        .product(name: <span class="string">"XCTVapor"</span>, package: <span class="string">"vapor"</span>), </span><br><span class="line">        ])</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œæ‚¨åº”è¯¥å†æ¬¡è¿è¡Œswiftè½¯ä»¶åŒ…æ›´æ–°å‘½ä»¤ï¼Œæˆ–è€…ç­‰åˆ°Xcodeè·å–æ–°çš„è½¯ä»¶åŒ…ä¾èµ–é¡¹ã€‚ è¯¥è¿‡ç¨‹å®Œæˆåï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨configure.swiftæ–‡ä»¶ä¸­çš„ä»¥ä¸‹è¡Œæ¥é…ç½®Leafï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/configure.swift */</span></span><br><span class="line"><span class="keyword">import</span> Vapor </span><br><span class="line"><span class="keyword">import</span> Leaf</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">(<span class="number">_</span> app: Application)</span></span> <span class="keyword">throws</span> &#123; </span><br><span class="line">    app.middleware.use(<span class="type">FileMiddleware</span>(publicDirectory: app.directory.publicDirectory))</span><br><span class="line">    app.views.use(.leaf)</span><br><span class="line">    app.leaf.cache.isEnabled = app.environment.isRelease</span><br><span class="line">    <span class="keyword">try</span> routes(app) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>configureæ–¹æ³•çš„ç¬¬ä¸€è¡Œå¯ç”¨äº†ä¸€ä¸ªä¸­é—´ä»¶ï¼Œè¯¥ä¸­é—´ä»¶å¯ä»¥ä¸ºåä¸ºPublicçš„ç›®å½•ä¸­çš„æ–‡ä»¶æä¾›æœåŠ¡ã€‚ä¸­é—´ä»¶åŸºæœ¬ä¸Šæ˜¯ä¸€ç§åŠŸèƒ½ï¼Œå®ƒå°†åœ¨æ¯æ¬¡è¯·æ±‚å¤„ç†ç¨‹åºä¹‹å‰æ‰§è¡Œã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæµè§ˆå™¨è¦æ±‚æä¾›æ–‡ä»¶ï¼Œä¾‹å¦‚æ ·å¼è¡¨ï¼Œè„šæœ¬æˆ–å›¾åƒï¼Œåˆ™FileMiddlewareå¯ä»¥åœ¨å…¬å…±ç›®å½•ä¸­æŸ¥æ‰¾è¯¥æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œå†…å®¹å°†ä½œä¸ºå“åº”è¿”å›ã€‚è¿™éå¸¸é€‚åˆæä¾›é™æ€èµ„äº§ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œé…ç½®ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å¯ä»¥é€šè¿‡æœåŠ¡å™¨å…¬å¼€ä½¿ç”¨ï¼Œå› æ­¤è¯·ä¸è¦åœ¨å…¶ä¸­æ”¾ç½®æ•æ„Ÿæ•°æ®ã€‚</p>
<p>åœ¨ä¸‹ä¸€è¡Œä¸­ï¼Œæˆ‘ä»¬å‘Šè¯‰æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå®ƒåº”è¯¥ä½¿ç”¨Leafæ¨¡æ¿å¼•æ“æ¥å‘ˆç°æˆ‘ä»¬çš„è§†å›¾ã€‚æ¨¡æ¿æ–‡ä»¶é»˜è®¤ä½äºèµ„æº/è§†å›¾ç›®å½•ä¸‹ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ¸²æŸ“å™¨æ¥æ›´æ”¹æ­¤è·¯å¾„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬å¯ä»¥æ¥å—äº†ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬å°†æ›´æ”¹Leafçš„é»˜è®¤ç¼“å­˜è¡Œä¸ºã€‚è¿™å¯¹äºè°ƒè¯•å’Œæµ‹è¯•ç›®çš„éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå¦‚æœä¸ä¿®æ”¹æ¨¡æ¿æ–‡ä»¶å°±æ— éœ€ç¼“å­˜ï¼Œåˆ™åªéœ€é‡æ–°åŠ è½½æµè§ˆå™¨çª—å£å³å¯ç«‹å³çœ‹åˆ°æ›´æ”¹ã€‚å¦åˆ™ï¼Œå¦‚æœå¯ç”¨äº†ç¼“å­˜ï¼Œåˆ™å¿…é¡»é‡æ–°å¯åŠ¨æ•´ä¸ªVaporåº”ç”¨ç¨‹åºæœåŠ¡å™¨ä»¥åæ˜ æ›´æ”¹ã€‚</p>
<p>æ‚¨åº”è¯¥çŸ¥é“å­˜åœ¨ä¸‰ç§ç±»å‹çš„ç¯å¢ƒã€‚åœ¨å°è¯•ç¼–å†™åº”ç”¨ç¨‹åºä»£ç æ—¶ï¼Œå¼€å‘ç¯å¢ƒéå¸¸æœ‰ç”¨ï¼Œå› ä¸ºåœ¨å¼€å‘äººå‘˜æ¨¡å¼ä¸‹è¿è¡Œæ—¶ä¼šæ‰“å¼€è®¸å¤šâ€‹â€‹è°ƒè¯•åŠŸèƒ½ã€‚åœ¨å‘å¸ƒåº”ç”¨ç¨‹åºæ—¶åº”ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡isReleaseå±æ€§æ£€æŸ¥è¯¥ç¯å¢ƒã€‚åœ¨å‘å¸ƒæ¨¡å¼ä¸‹ï¼Œæ—¥å¿—è®°å½•å‡å°‘ï¼Œè°ƒè¯•å’Œå…¶ä»–è­¦å‘Šä¿¡æ¯è¢«ç¦ç”¨ï¼Œå› æ­¤æ‚¨çš„æœåŠ¡å™¨å¯ä»¥æ›´å¿«åœ°å“åº”ä¼ å…¥çš„è¯·æ±‚ã€‚ç¬¬ä¸‰ä¸ªæ˜¯æµ‹è¯•ï¼Œç”¨äºå•å…ƒæµ‹è¯•ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ£€æµ‹ç¯å¢ƒæ¥è®¾ç½®ä¼ªé€ çš„æœåŠ¡å’Œæ•°æ®ã€‚</p>
<p>ä»…éœ€å‡ è¡Œä»£ç ï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨Leafã€‚åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„Resources/Viewsç›®å½•å’Œä¸€ä¸ªåä¸ºindex.leafçš„æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* FILE:</span><br><span class="line">* Resources/Views/index.leaf */</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/css/frontend.css"</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>#(title)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>#(body)<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">section</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ–‡ä»¶æ˜¯æˆ‘ä»¬çš„ç´¢å¼•HTMLæ¨¡æ¿ã€‚ Leafä½¿æ‚¨èƒ½å¤Ÿå°†ç‰¹å®šæ ‡ç­¾æ”¾å…¥HTMLä»£ç ã€‚ è¿™äº›æ ‡è®°å§‹ç»ˆä»¥ï¼ƒç¬¦å·å¼€å¤´ã€‚ æ‚¨å¯ä»¥å°†å®ƒä»¬è§†ä¸ºé¢„å¤„ç†å™¨å®ã€‚ Leafæ¸²æŸ“å™¨å°†å¤„ç†æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶ç”¨å®é™…å€¼æ›¿æ¢ï¼ƒï¼ˆå˜é‡ï¼‰å ä½ç¬¦ä»¥æ‰“å°å‡ºæ¥ã€‚</p>
<p>Xcodeæ— æ³•ä¸ºLeafæ–‡ä»¶é€‰æ‹©æ­£ç¡®çš„è¯­æ³•çªå‡ºæ˜¾ç¤ºï¼Œä½†æ˜¯æ‚¨å¯ä»¥ä¸ºå®ƒä»¬ä½¿ç”¨HTMLè¯­æ³•ç€è‰²ã€‚ åªéœ€å•å‡»ç¼–è¾‘å™¨â–¸è¯­æ³•ç€è‰²â–¸HTMLèœå•é¡¹ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æœå…³é—­IDEï¼Œåˆ™å¿…é¡»ä¸ºæ¯ä¸ªæ¨¡æ¿æ–‡ä»¶å†æ¬¡æ‰§è¡Œæ­¤æ“ä½œã€‚</p>
<p>åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å«frontend.cssæ–‡ä»¶çš„Public/cssæ–‡ä»¶å¤¹ç»“æ„ã€‚ CSSæ˜¯æè¿°HTMLæ–‡æ¡£çš„è§†è§‰æ ·å¼çš„æ ·å¼è¡¨ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨W3Schoolsç½‘ç«™äº†è§£æœ‰å…³æ­¤æ ¼å¼çš„æ›´å¤šä¿¡æ¯ã€‚ æ ·å¼è¡¨çš„ç¬¬ä¸€éƒ¨åˆ†å°†åŒ…å«æœ¬ç« ä¸­å°†ä½¿ç”¨çš„æ‰€æœ‰å…ƒç´ çš„ä¸€äº›åŸºæœ¬æ ·å¼ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Public/css/frontend.css */</span></span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: -apple-system, system-ui, BlinkMacSystemFont, <span class="string">"Helvetica"</span>, <span class="string">"Segoe UI"</span>, Roboto, Ubuntu; </span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5em</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">hr</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0px</span>; </span><br><span class="line">    <span class="attribute">border</span>: none; </span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">0.5px</span>; </span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">28px</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">16px</span> auto; </span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">800px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: </span><br><span class="line">    center;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">16px</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> <span class="selector-tag">img</span> &#123; </span><br><span class="line">    <span class="attribute">width</span>: <span class="number">64px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> <span class="selector-tag">nav</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">16px</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#main-content</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">16px</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#blog</span> <span class="selector-tag">article</span> &#123; </span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">32px</span> <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘è¿˜å°†å‘æ‚¨å±•ç¤ºä¸€äº›åŸºæœ¬çš„åª’ä½“æŸ¥è¯¢ï¼Œå› ä¸ºæˆ‘ä»¬æ­£è®¡åˆ’åˆ›å»ºä¸€ä¸ªç§»åŠ¨ä¼˜å…ˆå“åº”è®¾è®¡ã€‚ <strong>ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡å®šä¹‰<a href="https://www.freecodecamp.org/news/the-100-correct-way-to-do-css-breakpoints-88d6a5ba1862/" target="_blank" rel="noopener"><strong><code>CSSæ–­ç‚¹</code></strong></a>å°†å„ç§å±å¹•å°ºå¯¸ç»„åˆåœ¨ä¸€èµ·</strong>ã€‚ ä»¥ç§»åŠ¨è®¾å¤‡ä¸ºå…ˆçš„æ–¹æ³•æ„å‘³ç€æ‚¨é¦–å…ˆè¦ä¸ºç§»åŠ¨è®¾å¤‡è®¾è®¡ï¼Œç„¶åå°†æ ·å¼å˜ä½“åº”ç”¨äºæ›´å¤§çš„å±å¹•ã€‚ å¦‚æœæˆ‘ä»¬éœ€è¦å¤„ç†ç‰¹å®šçš„ç”¨ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†ä»£ç æ”¾å…¥æ­£ç¡®çš„åª’ä½“æŸ¥è¯¢å—ä¸­ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Public/css/frontend.css</span></span><br><span class="line"><span class="comment">* (insert after previous snippet) */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">599px</span>) &#123;&#125; </span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width:</span> <span class="number">600px</span>) &#123;&#125; </span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width:</span> <span class="number">900px</span>) &#123;&#125; </span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width:</span> <span class="number">1200px</span>) &#123;&#125; </span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width:</span> <span class="number">1800px</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘æ€»æ˜¯å°†æ‰€æœ‰å½©è‰²éƒ¨åˆ†æ”¾åœ¨å•ç‹¬çš„éƒ¨åˆ†ä¸­ã€‚ è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å½“ç„¶æƒ³å¢åŠ å¯¹æ˜æš—æ¨¡å¼çš„æ”¯æŒã€‚ ä»¥ä¸‹æ˜¯æµ…è‰²çš„å˜ä½“ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Public/css/frontend.css</span></span><br><span class="line"><span class="comment">* (insert after previous snippet) */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>; <span class="attribute">color</span>: <span class="number">#222</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">hr</span> &#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#ccc</span>; &#125;</span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#2B7DF6</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555BCF</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#A35CD7</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#efefef</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> <span class="selector-tag">h1</span> &#123; </span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºæ·±è‰²æ¨¡å¼åˆ›å»ºç‰ˆæœ¬ç›¸å¯¹å®¹æ˜“ï¼Œæ‚¨å¿…é¡»å¤åˆ¶å¹¶ç²˜è´´æ‰€æœ‰é¢œè‰²å®šä¹‰ï¼Œç„¶åå°†å…¶æ”¾ç½®åœ¨å¯ä»¥æ£€æµ‹é…è‰²æ–¹æ¡ˆé¦–é€‰é¡¹çš„åª’ä½“æŸ¥è¯¢ä¸­ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Public/css/frontend.css</span></span><br><span class="line"><span class="comment">* (insert after previous snippet) */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme:</span> dark) &#123; </span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">background</span>: <span class="number">#222</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#fff</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">hr</span> &#123;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#333</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="selector-tag">a</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#3386F7</span>; &#125;</span><br><span class="line">    <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#5B61DE</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#B365EA</span>; &#125;</span><br><span class="line">    <span class="selector-tag">header</span> &#123;</span><br><span class="line">        <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">header</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#fff</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€åä¸€æ­¥æ˜¯ç¨å¾®æ”¹å˜æˆ‘ä»¬çš„è·¯ç”±å™¨å¹¶è¿”å›æ¸²æŸ“çš„è§†å›¾ã€‚ Leafåªæ˜¯Vaporæ¡†æ¶æŠ½è±¡Viewå±‚çš„å®ç°ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨req.view.renderæ–¹æ³•å‘ˆç°ä»»ä½•å†…å®¹ã€‚ è¿™å°†ä½¿ç”¨å…ˆå‰é…ç½®çš„Leafå¼•æ“è¯»å–æ¨¡æ¿æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å¯¹å…¶è¿›è¡Œå‘ˆç°ã€‚ å¯ä»¥åˆ›å»ºè‡ªå·±çš„è§†å›¾æ¸²æŸ“å¼•æ“ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªé«˜çº§ä¸»é¢˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/routes.swift */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vapor</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">routes</span><span class="params">(<span class="number">_</span> app: Application)</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">    app.<span class="keyword">get</span> &#123; req -&gt; <span class="type">EventLoopFuture</span>&lt;<span class="type">View</span>&gt; <span class="keyword">in</span> </span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">Context</span>: <span class="title">Encodable</span> </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> title: <span class="type">String</span></span><br><span class="line">            <span class="keyword">let</span> body: <span class="type">String</span> </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> context = <span class="type">Context</span>(title: <span class="string">"myProject - Leaf"</span>, body: <span class="string">"Hello Leaf!"</span>)</span><br><span class="line">        <span class="keyword">return</span> req.view.render(<span class="string">"index"</span>, context) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://cdn.xuebaonline.com/vapor-3-stp1.png" alt="&quot;&quot;"></p>
<p><img src="http://cdn.xuebaonline.com/vapor-3-stp2.png" alt="&quot;&quot;"></p>
<p>renderæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¶å­æ–‡ä»¶çš„åç§°ï¼ˆä¸å¸¦æ‰©å±•åï¼‰ã€‚ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œæ‚¨å¯ä»¥ä¼ é€’ç¬¦åˆå¯ç¼–ç åè®®çš„ä»»ä½•å†…å®¹ã€‚å®ƒæ˜¯ä¸€ä¸ªé€šç”¨å‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œå¯ç¼–ç å¯¹è±¡æ•°ç»„æˆ–ä»»ä½•ç¬¦åˆåè®®è¦æ±‚çš„ä¸œè¥¿ã€‚é€šå¸¸ï¼Œæˆ‘åˆ›å»ºä¸€ä¸ªæœ¬åœ°Contextç»“æ„ï¼Œå› ä¸ºè¿™æ˜¯æ‚¨ä¼ é€’çš„è§†å›¾ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯æœ‰æ—¶æˆ‘å°†å…¶ç§°ä¸ºè§†å›¾æ¨¡å‹ã€‚</p>
<p>å¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘ä»¬æ­£åœ¨è¿”å›ä¸€ä¸ªEventLoopFâ€‹â€‹uture<View>å¯¹è±¡ã€‚è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œè¡¨ç¤ºå°†æ¥æŸä¸ªæ—¶é—´ç‚¹å°†å¯ç”¨çš„å¯¹è±¡ã€‚ Leafæ­£åœ¨ä»¥éé˜»å¡å¼‚æ­¥æ–¹å¼å‘ˆç°æ¨¡æ¿ï¼Œè¿™å°±æ˜¯å®ƒè¿”å›æ­¤ç±»å¯¹è±¡çš„åŸå› ã€‚åœ¨ä»¥åçš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨futureså¹¶ä½œå‡ºæ›´å¤špromisesï¼Œä½†æ˜¯ç°åœ¨è¯·è®°ä½ï¼ŒEventLoopFâ€‹â€‹utureæ˜¯å…·æœ‰futures valueçš„é€šç”¨å¯¹è±¡ã€‚</p>
<p>renderæ–¹æ³•è¿˜å°†è®¾ç½®ä¸€äº›å…¶ä»–æ ‡é¢˜ã€‚ Content-Typeå°†è®¾ç½®ä¸ºtext/htmlï¼Œå› æ­¤æ‚¨çš„æµè§ˆå™¨å¯ä»¥å°†é¡µé¢å‘ˆç°ä¸ºHTMLç½‘ç«™ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æ›´é«˜ç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨å‘½ä»¤è¡Œæˆ–Xcodeè¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œä½†è¯·ä¸è¦å¿˜è®°è®¾ç½®è‡ªå®šä¹‰å·¥ä½œç›®å½•ï¼Œå¦åˆ™æœåŠ¡å™¨å°†æ‰¾ä¸åˆ°æ‚¨çš„æ¨¡æ¿å’Œå…¬å…±æ–‡ä»¶ã€‚</p>
<h1 id="åšå®¢çš„é¡µé¢å±‚æ¬¡ç»“æ„"><a href="#åšå®¢çš„é¡µé¢å±‚æ¬¡ç»“æ„" class="headerlink" title="åšå®¢çš„é¡µé¢å±‚æ¬¡ç»“æ„"></a>åšå®¢çš„é¡µé¢å±‚æ¬¡ç»“æ„</h1><p>å¦‚æœæ‚¨æ‰“ç®—å»ºç«‹ä¸€ä¸ªå¤šé¡µçš„ç½‘ç«™ï¼Œé‚£ä¹ˆåˆ†å‰²æ¨¡æ¿å°†æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¯é‡å¤ä½¿ç”¨çš„é›¶ä»¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡å¯¼å‡ºå…±äº«è¿™äº›é›¶ä»¶ä»¥ä¾›ä»¥åä½¿ç”¨ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Leafå»ºç«‹äº²å­å…³ç³»ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ¶ä½œä¸‰ä¸ªå•ç‹¬çš„é¡µé¢ï¼Œæˆ‘ä»¬å¿…é¡»æ›´æ–°index.leafåŸºæœ¬æ¨¡æ¿ï¼Œå› ä¸ºè¿™å°†æˆä¸ºæ•´ä¸ªç½‘ç«™çš„ä¸»è¦å†…å®¹æ¡†æ¶ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Resources/Views/index.leaf */</span></span><br><span class="line">&lt;!<span class="selector-tag">DOCTYPE</span> <span class="selector-tag">html</span>&gt; </span><br><span class="line">&lt;<span class="selector-tag">html</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">head</span>&gt;</span><br><span class="line">        &lt;meta charset="utf-8"&gt;</span><br><span class="line">        &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt; </span><br><span class="line">        &lt;title&gt;#(title)&lt;/title&gt;</span><br><span class="line">        &lt;link rel="stylesheet" href="/css/frontend.css"&gt;</span><br><span class="line">        &lt;link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"&gt;</span><br><span class="line">    &lt;/head&gt; </span><br><span class="line">    &lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">header</span>&gt;</span><br><span class="line">            &lt;a href="/" id="logo"&gt;</span><br><span class="line">                &lt;img src="/images/logo.png"&gt;</span><br><span class="line">                &lt;h1&gt;myPage&lt;/h1&gt; </span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &lt;nav id="navigation"&gt;</span><br><span class="line">                &lt;a href="/"&gt;Home&lt;/a&gt; &amp;middot;</span><br><span class="line">                &lt;a href="/blog"&gt;Blog&lt;/a&gt; &amp;middot;</span><br><span class="line">                &lt;a href="#" onClick="javascript:about();"&gt;About&lt;/a&gt;</span><br><span class="line">            &lt;/nav&gt; </span><br><span class="line">        &lt;/header&gt;</span><br><span class="line">        &lt;<span class="selector-tag">main</span>&gt;</span><br><span class="line">            &lt;div id="content"&gt;</span><br><span class="line">                <span class="selector-id">#import</span>("<span class="selector-tag">body</span>")</span><br><span class="line">            &lt;/div&gt; </span><br><span class="line">        &lt;/main&gt;</span><br><span class="line">        &lt;script src="/javascript/frontend.js"&gt;&lt;/script&gt; </span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>å®ƒç¡®å®ä¸æˆ‘ä»¬å…ˆå‰çš„ç‰ˆæœ¬ç›¸ä¼¼ï¼Œä½†æ˜¯æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªå¸¦æœ‰å¾½æ ‡å’Œæ ‡é¢˜çš„æ–°æ ‡é¢˜éƒ¨åˆ†ï¼Œä»¥åŠä¸€äº›å¯¼èˆªé“¾æ¥ï¼Œè¿™äº›é“¾æ¥å°†å¸®åŠ©æˆ‘ä»¬åœ¨å­é¡µé¢ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚ åœ¨å†…å®¹éƒ¨åˆ†ï¼Œæ‚¨åº”è¯¥æ³¨æ„åˆ°#import(â€œbodyâ€)æ ‡è®°ã€‚ è¿™ç§°ä¸ºæ‰©å±•ç‚¹ï¼Œå­æ¨¡æ¿å¯ä»¥åœ¨å…¶ä¸­åµŒå…¥å…¶å†…å®¹ã€‚</p>
<p>è¯¥ç´¢å¼•æ¨¡æ¿å°†åœ¨æ‰€æœ‰å­é¡µé¢ä¸­é‡å¤ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…å¤åˆ¶å’Œç²˜è´´æ‰€æœ‰åˆ°å¤„éƒ½æ˜¯ç›¸åŒçš„é€šç”¨HTMLä»£ç ã€‚ è¿™æ˜¯ä¸€ç§ä»ä¸Šåˆ°ä¸‹çš„æ–¹æ³•ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­å®šä¹‰å¤–æ¡†å¹¶æŒ‡å®šå­çº§å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ ä¸€äº›é¢å¤–å†…å®¹çš„ä½ç½®ã€‚ å­æ¨¡æ¿å°†æ‰©å±•æ­¤åŸºæœ¬æ¨¡æ¿å¹¶å¯¼å‡ºbodyå˜é‡ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬å°†åœ¨å…¬å…±ç›®å½•ä¸­åµŒå…¥ä¸€äº›javascriptï¼Œè¯·åˆ›å»ºç›¸åº”çš„æ–‡ä»¶å¤¹å’Œä¸€ä¸ªç©ºçš„frontend.jsæ–‡ä»¶ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬ç¨åå°†ä½¿ç”¨å®ƒã€‚</p>
<h1 id="ä¸»é¡µ"><a href="#ä¸»é¡µ" class="headerlink" title="ä¸»é¡µ"></a>ä¸»é¡µ</h1><p>ä¸»é¡µå°†éå¸¸ç®€å•ã€‚ ä»…ç”¨å‡ è¡Œä»£ç ï¼Œæˆ‘ä»¬å°†æ‰©å±•åŸºæœ¬æ¨¡æ¿å¹¶å®šä¹‰è‡ªå®šä¹‰ä¸»ä½“ç»“æ„ã€‚ å¦‚å‰æ‰€è¿°ï¼Œhome.leafæ¨¡æ¿æ‰©å±•äº†index.leafæ¨¡æ¿å¹¶å¯¼å‡ºè‡ªå®šä¹‰ä¸»ä½“å€¼ã€‚ æ‚¨ä¹Ÿå¯ä»¥åœ¨æ­¤å­æ¨¡æ¿ä¸­ä½¿ç”¨å˜é‡ï¼Œè¿™æ˜¯å®ƒçš„å¤–è§‚ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Resources/Views/home.leaf */</span></span><br><span class="line"><span class="selector-id">#extend</span>("<span class="selector-tag">index</span>"): </span><br><span class="line">    <span class="selector-id">#export</span>("<span class="selector-tag">body</span>"):</span><br><span class="line">        &lt;section class="wrapper"&gt; </span><br><span class="line">            &lt;h2&gt;#(header)&lt;/h2&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">        &lt;section class="wrapper"&gt;</span><br><span class="line">            &lt;p&gt;#(message)&lt;/p&gt; </span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">    <span class="selector-id">#endexport</span> </span><br><span class="line"><span class="selector-id">#endextend</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨è¯¥æ¸²æŸ“æ•´ä¸ªé¡µé¢äº†ã€‚æˆ‘ä»¬ä¸å¿…å¤„ç†bodyå‚æ•°ï¼Œå› ä¸ºå®ƒå·²ç»åœ¨å­æ¨¡æ¿ä¸­å¯¼å‡ºäº†ã€‚å¯¼å‡ºæ„å‘³ç€æ‚¨æ­£åœ¨å®šä¹‰å®ƒï¼Œå› æ­¤æˆ‘ä»¬ä»…éœ€ä¼ é€’æ ‡é¢˜ï¼Œæ ‡å¤´å’Œæ¶ˆæ¯ä¸Šä¸‹æ–‡å˜é‡ä»¥åŠæœ€ç»ˆæ¸²æŸ“çš„æ­£ç¡®å€¼å³å¯ã€‚æ‚¨å¯ä»¥åœ¨ä¸¤ä¸ªæ¨¡æ¿ä¸­ä½¿ç”¨å˜é‡ï¼Œä½†ä¸è¦å¿˜è®°å°†åœ¨Leafæ–‡ä»¶ä¸­ä½¿ç”¨çš„æ¯ä¸ªé”®ä½œä¸ºè§†å›¾ä¸Šä¸‹æ–‡ä¼ é€’ã€‚</p>
<p>å¯ä»¥åˆ›å»ºä¸€ä¸ªç»§æ‰¿é“¾ï¼Œä¾‹å¦‚ç´¢å¼•â–¸é¡µé¢â–¸æ¬¢è¿ã€‚å¤šçº§æ¨¡æ¿å¾ˆå¥½ï¼Œå¦‚æœæ‚¨ä»ä¸Šæ–¹éµå¾ªç›¸åŒçš„æ¨¡å¼ï¼Œåˆ™å¯ä»¥ä¸ºè§†å›¾åˆ›å»ºä¸€ä¸ªä¸é”™çš„å±‚æ¬¡ç»“æ„ã€‚è¯·è®°ä½ï¼Œæ‚¨åº”å§‹ç»ˆä¸ºæ•´ä¸ªå±‚æ¬¡ç»“æ„ä¸­ä½¿ç”¨çš„æ¯ä¸ªå•ä¸ªLeafå˜é‡æä¾›ä¸Šä¸‹æ–‡å€¼ï¼Œå¦åˆ™ä¼šæ”¶åˆ°é”™è¯¯æ¶ˆæ¯ã€‚</p>
<p>è®©æˆ‘ä»¬å¼€å§‹æ€è€ƒæ¨¡å—ã€‚æˆ‘å·²ç»æåˆ°è¿‡ï¼ŒVaporåº”ç”¨ç¨‹åºå¯ä»¥å…·æœ‰æ¨¡å‹ï¼Œæ§åˆ¶å™¨ï¼Œè¿ç§»è„šæœ¬ç­‰ç­‰ã€‚æ¨¡å—æ˜¯å°†è¿™äº›ç»„ä»¶ç»„åˆåœ¨ä¸€èµ·çš„ä¸œè¥¿ã€‚æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ¨¡å—å°†ç§°ä¸ºFrontendï¼Œå®ƒå°†è´Ÿè´£å‘ˆç°ç½‘ç«™çš„ä¸»é¡µã€‚åœ¨Sources/Appç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„Modules/Frontendç»“æ„ã€‚ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰ä¸å‰ç«¯ç›¸å…³çš„ä»£ç æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ä¸­ã€‚</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ä¸“ç”¨çš„FrontendControllerå¯¹è±¡å°†æ¸²æŸ“é€»è¾‘ä¸è·¯ç”±åˆ†å¼€ã€‚æ‚¨å¯ä»¥å°†æ­¤æ§åˆ¶å™¨æ”¾å…¥åŒåçš„æ–‡ä»¶ä¸­ï¼Œé€šå¸¸å¤§å¤šæ•°ç»“æ„å’Œç±»éƒ½æœ‰å…¶ä¸“ç”¨çš„Swiftæ–‡ä»¶ï¼Œä»¥åä¹Ÿå¯ä»¥éµå¾ªæ­¤çº¦å®šã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªåŠŸèƒ½ä¸è¯¥åŠŸèƒ½å—ç›¸åŒçš„ç­¾åï¼Œè€Œä¸æ˜¯å®ŒæˆåŠŸèƒ½å—ï¼Œç„¶åå†å°†æ­¤æ–¹æ³•è¿æ¥åˆ°è·¯ç”±ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/Modules/Frontend/FrontendController.swift */</span></span><br><span class="line"><span class="keyword">import</span> Vapor</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FrontendController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">func</span> <span class="title">homeView</span><span class="params">(req: Request)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">EventLoopFuture</span>&lt;<span class="type">View</span>&gt; &#123; </span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">Context</span>: <span class="title">Encodable</span> </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> title: <span class="type">String</span> </span><br><span class="line">            <span class="keyword">let</span> header: <span class="type">String</span> </span><br><span class="line">            <span class="keyword">let</span> message: <span class="type">String</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> context = <span class="type">Context</span>(title: <span class="string">"Char's Blog - é¦–é¡µ"</span>,</span><br><span class="line">        header: <span class="string">"å¤§å®¶å¥½,"</span>,</span><br><span class="line">        message: <span class="string">"æ¬¢è¿å¤§å®¶è®¿é—®æˆ‘çš„åšå®¢!"</span>) </span><br><span class="line">        <span class="keyword">return</span> req.view.render(<span class="string">"home"</span>, context)</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åº”è¯¥åšçš„ä¸‹ä¸€ä»¶äº‹æ˜¯åœ¨è·¯ç”±å™¨å’Œæ§åˆ¶å™¨ä¹‹é—´å»ºç«‹è¿æ¥ã€‚ æˆ‘ä»¬ä¸ä¼šå°†æ‰€æœ‰å†…å®¹ç®€å•åœ°æ”¾å…¥è·¯ç”±æˆ–é…ç½®æ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è·¯ç”±å™¨ã€‚ å¦‚æœæ‚¨æœ‰å¾ˆå¤šè·¯ç”±ï¼Œåˆ™æœ€å¥½ä½¿ç”¨RouteCollectionåè®®å°†å®ƒä»¬åˆ†æˆé›†åˆã€‚ è¯¥åè®®å…·æœ‰å¯åŠ¨åŠŸèƒ½ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨è·¯ç”±å¯¹è±¡è€Œä¸æ˜¯åº”ç”¨ç¨‹åºæ¥å®ç°å’Œæ³¨å†Œè·¯ç”±ã€‚</p>
<p>æ‚¨å¯ä»¥åƒä»¥å‰ä¸€æ ·åœ¨routeå¯¹è±¡ä¸Šä½¿ç”¨ç›¸åŒçš„getæ–¹æ³•ã€‚ åœ¨RoutesBuilderä¸Šä¸ºæ‰€æœ‰HTTPæ–¹æ³•ï¼ˆè·å–ï¼Œå‘å¸ƒï¼Œæ”¾ç½®ï¼Œåˆ é™¤ç­‰ï¼‰å®šä¹‰äº†å¯ç”¨çš„å¸®åŠ©ç¨‹åºåŠŸèƒ½ã€‚ æ‚¨è¿˜å¯ä»¥æŒ‰è·¯å¾„ç»„ä»¶æˆ–ä¸­é—´ä»¶å¯¹è·¯ç”±è¿›è¡Œåˆ†ç»„ã€‚ è·¯ç”±ç»„å¯ç”¨äºè¿æ¥å…·æœ‰ç›¸åŒåŠŸèƒ½çš„ç›¸åŒåç§°ç©ºé—´ä¸‹çš„ç«¯ç‚¹ã€‚</p>
<p>æ‚¨ä¹Ÿå¯ä»¥è¾“å…¥ä¸€ä¸ªç‰¹å®šçš„è·¯å¾„ç»„ä»¶ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠHomeViewæ–¹æ³•ä»FrontendControllerè¿æ¥åˆ°ä¸»è¦ç«¯ç‚¹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/Modules/Frontend/FrontendRouter.swift */</span></span><br><span class="line"><span class="keyword">import</span> Vapor</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FrontendRouter</span>: <span class="title">RouteCollection</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> controller = <span class="type">FrontendController</span>()</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">boot</span><span class="params">(routes: RoutesBuilder)</span></span> <span class="keyword">throws</span> &#123; </span><br><span class="line">        routes.<span class="keyword">get</span>(use: <span class="keyword">self</span>.controller.homeView)</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ä»¬å¿…é¡»åœ¨é…ç½®æ–¹æ³•ä¸­å¯åŠ¨è·¯ç”±å™¨ã€‚ è¿™æ˜¯ä¸€ç§ä¸é”™çš„æ–¹æ³•ï¼Œå› ä¸ºæ‚¨å¯ä»¥æ‹¥æœ‰å¤šä¸ªè·¯ç”±å™¨å¹¶æ³¨å†Œæ‰€éœ€çš„æ•°é‡ã€‚ å¼•å¯¼æ–¹æ³•éœ€è¦ä¸€ä¸ªè·¯ç”±æ„å»ºå™¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’app.routeså±æ€§ï¼Œå®ƒå°†å¾ˆå¥½åœ°å·¥ä½œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/configure.swift */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">(<span class="number">_</span> app: Application)</span></span> <span class="keyword">throws</span> &#123; </span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">let</span> router = <span class="type">FrontendRouter</span>()</span><br><span class="line">    <span class="keyword">try</span> router.boot(routes: app.routes) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªä¸é”™çš„å°ä¸»é¡µï¼Œè¯¥ä¸»é¡µä½¿ç”¨äº†é€šè¿‡æ¨¡æ¿å¼•æ“ç»„åˆåœ¨ä¸€èµ·çš„ä¸¤ä¸ªæ¨¡æ¿æ–‡ä»¶ã€‚</p>
<p><img src="http://cdn.xuebaonline.com/vapor-3-stp3.png" alt="&quot;&quot;"></p>
<p><img src="http://cdn.xuebaonline.com/vapor-3-stp4.png" alt="&quot;&quot;"></p>
<h1 id="åšå®¢åˆ—è¡¨"><a href="#åšå®¢åˆ—è¡¨" class="headerlink" title="åšå®¢åˆ—è¡¨"></a>åšå®¢åˆ—è¡¨</h1><p>ç”±äºæˆ‘ä»¬ä½¿ç”¨æ¨¡å—åŒ–æ¶æ„æ„å»ºåº”ç”¨ç¨‹åºï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½ç®€å•åœ°å°†ä¸åšå®¢ç›¸å…³çš„å†…å®¹æ”¾å…¥Frontendæ¨¡å—ä¸­ã€‚ åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œå‰ç«¯æ¨¡å—æœ‰äº›ç‰¹æ®Šï¼Œå› ä¸ºå®ƒä¸ºæˆ‘ä»¬æä¾›äº†å‘ˆç°ç½‘ç«™çš„ä¸»è¦å…ƒç´ ã€‚ å®ƒåŒ…å«ç´¢å¼•æ¨¡æ¿ï¼Œé€šç”¨æ ·å¼è¡¨å’Œjavascriptæ–‡ä»¶ã€‚ å‰ç«¯å°†æ˜¾ç¤ºçš„æ‰€æœ‰å…¶ä»–å†…å®¹å‡å–å†³äºæ­¤æ¨¡å—ã€‚</p>
<p>æˆ‘ä»¬å°†ä¸å¾—ä¸åˆ›å»ºä¸€ä¸ªåä¸ºBlogçš„æ–°æ¨¡å—ã€‚ æ¯ä¸ªæ¨¡å—éƒ½å°†éµå¾ªæˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ç›¸åŒæ¨¡å¼ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å°†æ‹¥æœ‰ä¸“ç”¨çš„è·¯ç”±å™¨å’Œæ§åˆ¶å™¨ã€‚ è¿™æ¬¡æˆ‘ä»¬å°†ä»é¦–å…ˆæ³¨å†Œè·¯ç”±å™¨å¼€å§‹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/configure.swift */</span></span><br><span class="line"><span class="keyword">import</span> Vapor <span class="keyword">import</span> Leaf</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">(<span class="number">_</span> app: Application)</span></span> <span class="keyword">throws</span> &#123; </span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">let</span> routers: [<span class="type">RouteCollection</span>] = [ <span class="type">FrontendRouter</span>(), <span class="type">BlogRouter</span>(),</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">for</span> router <span class="keyword">in</span> routers &#123;</span><br><span class="line">        <span class="keyword">try</span> router.boot(routes: app.routes) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°†å¿…é¡»ä¸æ§åˆ¶å™¨ä¸€èµ·ä¸ºBlogæ¨¡å—åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨å¯¹è±¡ã€‚ æˆ‘ä»¬è¦æ³¨å†Œçš„å”¯ä¸€é€”å¾„æ˜¯åšå®¢è§†å›¾ã€‚ è¿™ä½äºä¿å­˜ä¸ºBlogRouter.swiftçš„åšå®¢æ¨¡å—ç›®å½•ä¸­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/Modules/Blog/BlogRouter.swift */</span></span><br><span class="line"><span class="keyword">import</span> Vapor</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BlogRouter</span>: <span class="title">RouteCollection</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> controller = <span class="type">BlogFrontendController</span>()</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">boot</span><span class="params">(routes: RoutesBuilder)</span></span> <span class="keyword">throws</span> &#123; </span><br><span class="line">        routes.<span class="keyword">get</span>(<span class="string">"blog"</span>, use: <span class="keyword">self</span>.controller.blogView)</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BlogFrontendControllerå°†è´Ÿè´£å¤„ç†Webä¸Šå…¬å¼€å¯ç”¨çš„æ‰€æœ‰ä¸åšå®¢ç›¸å…³çš„è·¯ç”±ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒè¢«ç§°ä¸ºWebå‰ç«¯æ§åˆ¶å™¨ã€‚ ç¨åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç›¸åŒçš„é€»è¾‘æ¥åˆ›å»ºå…¶ä»–ç±»å‹çš„å†…å®¹æ¸ é“ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/Modules/Blog/BlogFrontendController.swift */</span></span><br><span class="line"><span class="keyword">import</span> Vapor</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BlogFrontendController</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">blogView</span><span class="params">(req: Request)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">EventLoopFuture</span>&lt;<span class="type">View</span>&gt; &#123; </span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">Context</span>: <span class="title">Encodable</span> </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> title: <span class="type">String</span></span><br><span class="line">            <span class="keyword">let</span> posts: [<span class="type">BlogPost</span>] </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> posts = <span class="type">BlogRepository</span>().publishedPosts()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> context = <span class="type">Context</span>(title: <span class="string">"myPage - Blog"</span>, posts: posts) </span><br><span class="line">        <span class="keyword">return</span> req.view.render(<span class="string">"blog"</span>, context)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨è¿™é‡Œåšçš„å’Œä»¥å‰å®Œå…¨ä¸€æ ·ã€‚ è¿™æ¬¡çš„å”¯ä¸€åŒºåˆ«æ˜¯æˆ‘ä»¬æ›´æ”¹äº†ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºæˆ‘ä»¬å°†ä¼ é€’ä¸€ä¸ªEncodable BlogPostå¯¹è±¡æ•°ç»„ã€‚ è¯¥ç»“æ„å°†è¢«é‡ç”¨ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶æ”¾å…¥æ¨¡å—ç›®å½•ä¸‹çš„å•ç‹¬BlogPost.swiftæ–‡ä»¶ä¸­ã€‚ è¿™æ˜¯åŸºæœ¬åšå®¢æ–‡ç« çš„å¯èƒ½æ•°æ®è¡¨ç¤ºå½¢å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/Modules/Blog/BlogPost.swift */</span></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BlogPost</span>: <span class="title">Encodable</span> </span>&#123; </span><br><span class="line">    <span class="keyword">let</span> title: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> slug: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> image: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> excerpt: <span class="type">String</span> </span><br><span class="line">    <span class="keyword">let</span> date: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> category: <span class="type">String?</span> </span><br><span class="line">    <span class="keyword">let</span> content: <span class="type">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Titleæ˜¯åšå®¢æ–‡ç« çš„æ ‡é¢˜ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨slugå­—æ®µä¸ºæ–‡ç« æä¾›ä¸€ä¸ªæ¼‚äº®çš„SEOå‹å¥½URLã€‚ æˆ‘å‡†å¤‡äº†ä¸€äº›å¯ä»¥ä»åŸå§‹èµ„æ–™ä¸­è·å–çš„å›¾åƒã€‚ å°†å®ƒä»¬æ”¾åœ¨Public/images/postsç›®å½•ä¸‹ã€‚ æˆ‘ä»¬å°†è¿™äº›åç§°å­˜å‚¨åœ¨imageå­—æ®µä¸‹ã€‚ æ‘˜å½•å°†æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­ï¼Œå‘å¸ƒæ—¥æœŸæ˜¯ç»™å®šå¸–å­çš„å‘å¸ƒæ—¥æœŸã€‚ Categoryæ˜¯ä¸€ä¸ªå¯é€‰å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å°†å…¶ç”¨ä½œå°†å¸–å­åˆ†ç»„åœ¨ä¸€èµ·çš„ç±»åˆ«ã€‚ å†…å®¹å°†æ˜¾ç¤ºåœ¨å¸–å­è¯¦ç»†ä¿¡æ¯é¡µé¢ä¸Šã€‚</p>
<p>æˆ‘ä»¬å¦‚ä½•å­˜å‚¨è¿™äº›åšå®¢æ–‡ç« ï¼Ÿ å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å°†æ‹¥æœ‰ä¸€ä¸ªBlogRepositoryç»“æ„å¹¶å¯¹æ‰€æœ‰å†…å®¹è¿›è¡Œç¡¬ç¼–ç ã€‚ æ‚¨å¯ä»¥åœ¨Blogæ¨¡å—ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ¥å­˜å‚¨è¯¥å¯¹è±¡ã€‚ åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨SQLiteæ•°æ®åº“ï¼Œç¨åå†è¿ç§»åˆ°PostgreSQLå­˜å‚¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/Modules/Blog/BlogRepository.swift */</span></span><br><span class="line"><span class="keyword">import</span> Vapor</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BlogRepository</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">publishedPosts</span><span class="params">()</span></span> -&gt; [<span class="type">BlogPost</span>] &#123; </span><br><span class="line">        [</span><br><span class="line">        <span class="type">BlogPost</span>(title: <span class="string">"Indonesia"</span>, slug: <span class="string">"indonesia"</span>,</span><br><span class="line">            image: <span class="string">"/images/posts/05.jpg"</span>,</span><br><span class="line">            excerpt: <span class="string">"Et excepturi id harum ipsam doloremque."</span>,</span><br><span class="line">            date: <span class="string">"2019"</span>,</span><br><span class="line">            category: <span class="string">"Islands"</span>,</span><br><span class="line">            content: <span class="string">"Accusantium amet vero numquam tenetur sit quidem ut.</span></span><br><span class="line"><span class="string">            Officiis in iste adipisci corporis. Nisi aut consequatur laudantium et veritatis aut amet officiis. Repellat sapiente quis cupiditate veniam est. Est tempora molestiae voluptatum excepturi eum. Eos provident labore quidem ipsam."</span>),</span><br><span class="line"></span><br><span class="line">        <span class="type">BlogPost</span>(title: <span class="string">"Mauritius"</span>, slug: <span class="string">"mauritius"</span>,</span><br><span class="line">            image: <span class="string">"/images/posts/04.jpg"</span>,</span><br><span class="line">            excerpt: <span class="string">"Pariatur debitis quod occaecati quidem. "</span>,</span><br><span class="line">            date: <span class="string">"2016"</span>,</span><br><span class="line">            category: <span class="string">"Islands"</span>,</span><br><span class="line">            content: <span class="string">"Enim et a ex quisquam qui sed fuga consectetur. Dolorem et</span></span><br><span class="line"><span class="string">            eum non dicta modi tempora facilis. Totam dolores repudiandae magni autem doloremque. Libero consequuntur et distinctio esse a consectetur. Fugit quis sed provident est sunt. Rerum quibusdam blanditiis optio autem."</span>),</span><br><span class="line"></span><br><span class="line">        <span class="type">BlogPost</span>(title: <span class="string">"California"</span>, slug: <span class="string">"california"</span>,</span><br><span class="line">            image: <span class="string">"/images/posts/03.jpg"</span>,</span><br><span class="line">            excerpt: <span class="string">"Voluptates ipsa eos sit distinctio."</span>,</span><br><span class="line">            date: <span class="string">"2015"</span>,</span><br><span class="line">            category: <span class="literal">nil</span>,</span><br><span class="line">            content: <span class="string">"Et non reiciendis et illum corrupti. Et ducimus optio</span></span><br><span class="line"><span class="string">            commodi molestiae quis ipsum consequatur. A fugit amet amet qui tenetur. Aut voluptates ut labore consectetur temporibus consectetur. Perferendis et neque id minima voluptatem temporibus a dolor. Eos nihil dignissimos consequuntur et consequuntur nam."</span>),</span><br><span class="line"></span><br><span class="line">        <span class="type">BlogPost</span>(title: <span class="string">"The Maldives"</span>, slug: <span class="string">"the-maldives"</span>,</span><br><span class="line">            image: <span class="string">"/images/posts/02.jpg"</span>,</span><br><span class="line">            excerpt: <span class="string">"Possimus est labore recusandae asperiores fuga sequisit."</span>,</span><br><span class="line">            date: <span class="string">"2014"</span>,</span><br><span class="line">            category: <span class="string">"Islands"</span>,</span><br><span class="line">            content: <span class="string">"Dignissimos mollitia doloremque omnis repellendus quibusdam ut amet. Autem vitae enim consequuntur. Quis quo esse numquam doloremque esse. Neque accusantium sint tempore distinctio. Dolorem quibusdam et ab impedit necessitatibus cum. Eius voluptatem ducimus velit non."</span>),</span><br><span class="line"></span><br><span class="line">        <span class="type">BlogPost</span>(title: <span class="string">"Sri Lanka"</span>, slug: <span class="string">"sri-lanka"</span>,</span><br><span class="line">            image: <span class="string">"/images/posts/01.jpg"</span>, </span><br><span class="line">            excerpt: <span class="string">"Ratione est quo nemo date: "</span><span class="number">2014</span><span class="string">",</span></span><br><span class="line"><span class="string">            category: "</span><span class="type">Islands</span><span class="string">",</span></span><br><span class="line"><span class="string">            content: "</span><span class="type">Deserunt</span> nulla culpa quibusdam. <span class="type">Ducimus</span> delectus ea ipsa  quisquam aut <span class="keyword">in</span> dolor placeat dolore deleniti quia. <span class="type">Error</span> aliquam harum  earum. <span class="type">Quos</span> dignissimos dolores ratione illo. <span class="type">Dolores</span> velit sunt sed quas  quis itaque sit omnis. <span class="type">Molestias</span> explicabo aut eum amet blanditiis quia  similique soluta.<span class="string">"),</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">    &#125; </span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p>æœ€åä¸€æ­¥æ˜¯åˆ›å»ºæˆ‘ä»¬çš„blog.leafæ¨¡æ¿ã€‚ å°±åƒå…¶ä»–æ‰€æœ‰Leafæ–‡ä»¶ä¸€æ ·ï¼Œæ­¤æ–‡ä»¶ä½äºResources/Viewsç›®å½•ä¸‹ã€‚ æˆ‘ä»¬å°†åœ¨æ­¤è§†å›¾ä¸­éå†åšå®¢æ–‡ç« å¹¶å‘ˆç°å¯ç”¨çš„æ–‡ç« æ•°æ®ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* FILE:</span><br><span class="line">* Resources/Views/blog.leaf */</span><br><span class="line">#extend("index"): </span><br><span class="line">    #export("body"):</span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">id</span>=<span class="string">"blog"</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Blog<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        #for(post in posts):</span><br><span class="line">        <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/#(post.slug)"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"#(post.image)"</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span>#(post.title)<span class="tag">&lt;/<span class="name">h3</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>#(post.excerpt)<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">                #if(post.category != nil):</span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"category"</span>&gt;</span>#(post.category)<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">                #else:</span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"category"</span>&gt;</span>Uncategorized<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">                #endif</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">        #endfor</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    #endexport </span><br><span class="line">#endextend</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå°†å¯ç¼–ç é¡¹çš„æ•°ç»„ä¼ é€’ç»™è§†å›¾ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨#foræ ‡è®°å¯¹å®ƒä»¬è¿›è¡Œè¿­ä»£ã€‚ å¦‚æœæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯å¯¹è±¡ï¼Œåˆ™å¯ä»¥é€šè¿‡ç‚¹è¡¨ç¤ºæ³•è®¿é—®å®ƒä»¬çš„å±æ€§ã€‚ å¦åˆ™ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°æ‰“å°å‡ºç»™å®šåç§°çš„å€¼ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨#ifæ ‡ç­¾æ£€æŸ¥å˜é‡æ˜¯å¦å­˜åœ¨ï¼Œï¼ƒelseéƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯åœ¨Leafä¸­ï¼Œæ‚¨å§‹ç»ˆå¿…é¡»ä½¿ç”¨#end[tag]é—­åŒ…æ¥å…³é—­æ ‡ç­¾ã€‚<br>è¿è¡Œè¯¥åº”ç”¨ç¨‹åºå¹¶å¯¼èˆªåˆ°/blogé¡µé¢ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°å¸–å­åˆ—è¡¨ã€‚</p>
<p><img src="http://cdn.xuebaonline.com/vapor-3-stp5.png" alt="&quot;&quot;"></p>
<h1 id="åšå®¢æ¡ç›®é¡µé¢"><a href="#åšå®¢æ¡ç›®é¡µé¢" class="headerlink" title="åšå®¢æ¡ç›®é¡µé¢"></a>åšå®¢æ¡ç›®é¡µé¢</h1><p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯ä¸ºåšå®¢æ–‡ç« è¯¦ç»†ä¿¡æ¯é¡µé¢å®ç°SEOå‹å¥½çš„è·¯ç”±ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å°†ä½¿ç”¨å”¯ä¸€çš„æ®µä»£ç ä½œä¸ºURLçš„è·¯å¾„ï¼Œä»¥æŸ¥çœ‹æ¯ç¯‡æ–‡ç« çš„è¯¦ç»†ä¿¡æ¯é¡µé¢ã€‚</p>
<p>é¦–å…ˆï¼Œæ‚¨åº”è¯¥çŸ¥é“å¯ä»¥ä½¿ç”¨è·¯ç”±å¤„ç†ç¨‹åºæ•è·æ‰€æœ‰è·¯ç”±ï¼Œå¹¶ä¸”.anythingè·¯å¾„ç»„ä»¶ã€‚ è¿˜æœ‰ä¸€ä¸ª.catchallå¤§å°å†™ï¼Œè¿™ä¸¤è€…ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«æ˜¯ï¼Œä»»ä½•å†…å®¹ï¼ˆ*ï¼‰éƒ½æ˜¯è·¯å¾„ç»„ä»¶çš„å•ä¸ªåŒ¹é…é¡¹ï¼Œä½†æ˜¯catch allï¼ˆ**ï¼‰å¤§å°å†™å®é™…ä¸Šä¼šæ•è·ç¬¬ä¸€ä¸ª/å­—ç¬¦ä¹‹åçš„æ‰€æœ‰å†…å®¹ åŒ…æ‹¬å…¶ä»–å­è·¯å¾„ï¼Œä¾‹å¦‚/foo/bar/ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/Modules/Blog/BlogRouter.swift */</span></span><br><span class="line"><span class="keyword">import</span> Vapor</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BlogRouter</span>: <span class="title">RouteCollection</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> controller = <span class="type">BlogFrontendController</span>() </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">boot</span><span class="params">(routes: RoutesBuilder)</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">        routes.<span class="keyword">get</span>(<span class="string">"blog"</span>, use: <span class="keyword">self</span>.controller.blogView)</span><br><span class="line">        routes.<span class="keyword">get</span>(.anything, use: <span class="keyword">self</span>.controller.postView) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œ.anythingæ¨¡å¼å°±è¶³å¤Ÿäº†ï¼Œæ¥ä¸‹æ¥å°†è§†å›¾å¤„ç†ç¨‹åºæ·»åŠ åˆ°æ§åˆ¶å™¨ä¸­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Sources/App/Modules/Blog/BlogFrontendController.swift */</span></span><br><span class="line"><span class="keyword">import</span> Vapor</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BlogFrontendController</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">postView</span><span class="params">(req: Request)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">EventLoopFuture</span>&lt;<span class="type">Response</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> posts = <span class="type">BlogRepository</span>().publishedPosts()</span><br><span class="line">        <span class="keyword">let</span> slug = req.url.path.trimmingCharacters(<span class="keyword">in</span>: .<span class="keyword">init</span>(charactersIn: <span class="string">"/"</span>)) <span class="keyword">guard</span> <span class="keyword">let</span> post = posts.first(<span class="keyword">where</span>: &#123; $<span class="number">0</span>.slug == slug &#125;) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> req.eventLoop.future(req.redirect(to: <span class="string">"/"</span>)) </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">Context</span>: <span class="title">Encodable</span> </span>&#123; </span><br><span class="line">            <span class="keyword">let</span> title: <span class="type">String</span></span><br><span class="line">            <span class="keyword">let</span> post: <span class="type">BlogPost</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="type">Context</span>(title: <span class="string">"Char's Blog - \(post.title)"</span>, post: post) </span><br><span class="line">        <span class="keyword">return</span> req.view.render(<span class="string">"post"</span>, context).encodeResponse(<span class="keyword">for</span>: req)</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‚¨å¯ä»¥é€šè¿‡req.url.pathå±æ€§è®¿é—®URLçš„è·¯å¾„ã€‚æˆ‘ä»¬åº”è¯¥å…ˆä¿®å‰ªå®ƒï¼Œå› ä¸ºæˆ‘ä»¬ä¸å…³å¿ƒå°¾éƒ¨çš„æ–œæ å’Œæ–œæ ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿‡æ»¤åšå®¢æ–‡ç« ï¼Œä»¥æŸ¥çœ‹æ˜¯å¦æœ‰åŒ¹é…ç»™å®šè·¯çº¿çš„æ–‡ç« ã€‚è¿™æ¬¡ï¼Œå¦‚æœä»¥åä½¿ç”¨å›å¤ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œæˆ‘ä»¬å°†é‡å®šå‘åˆ°ä¸»é¡µã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Leafæ¸²æŸ“å¸–å­ã€‚</p>
<p>ç”±äºé‡å®šå‘æ–¹æ³•è¿”å›å“åº”ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æœ€åå°†è§†å›¾ç¼–ç ä¸ºå“åº”å¯¹è±¡ã€‚é€šè¿‡è°ƒç”¨.encodeResponseå‡½æ•°ï¼Œå¯ä»¥è½»æ¾å®Œæˆæ­¤æ“ä½œã€‚æ¸²æŸ“çš„è§†å›¾å°†ä½¿ç”¨å½“å‰è¯·æ±‚è½¬æ¢ä¸ºæ–°çš„HTTPå“åº”ã€‚</p>
<p>åœ¨Vaporä¸­ï¼Œæ‚¨å°†ä¸å¾—ä¸ä¸futureså’Œpromisesè¿›è¡Œå¤§é‡åˆä½œã€‚å†è¯´ä¸€æ¬¡ï¼Œfuturesæ˜¯futureæŸä¸ªæ—¶é—´ç‚¹å°†è¦å­˜åœ¨çš„future valueçš„ä¸€èˆ¬è¡¨ç¤ºã€‚</p>
<p>futureså…·æœ‰å…³è”çŠ¶æ€ä»¥è·Ÿè¸ªvalueçš„è¿›åº¦ã€‚future æ˜¯ paddingï¼Œç›´åˆ°æœªä¸ºå…¶åˆ†é…å€¼ã€‚å¦‚æœvalueåˆ°è¾¾ï¼Œæˆ‘ä»¬å°±è¯´future æ˜¯ fulfilledäº†ã€‚å¦åˆ™ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œåˆ™futureå¤„äºæ‹’ç»çŠ¶æ€ã€‚</p>
<p>vaporæ­£åœ¨ä½¿ç”¨SwiftNIOåº“ä¸­çš„EventLoopFâ€‹â€‹utureå¯¹è±¡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨req.eventLoop.futureï¼ˆvalueï¼‰æ–¹æ³•è½»æ¾åœ°åˆ›å»ºå…·æœ‰æ»¡è¶³å€¼çš„Futureï¼Œå¦‚æœè¦è¿”å›é”™è¯¯ï¼Œåªéœ€å°†å…¶ä½œä¸ºé”™è¯¯å‚æ•°ä¼ é€’ç»™å¸¦æœ‰å‘½åå‚æ•°çš„Futureæ–¹æ³•ï¼š.future ï¼ˆé”™è¯¯ï¼šmyErrorï¼‰ã€‚</p>
<p>æ¯ä¸ªfatureéƒ½ä¸äº‹ä»¶å¾ªç¯ç›¸å…³è”ï¼Œäº‹ä»¶å¾ªç¯æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä¿æŒç†æ™ºç¯å¢ƒçš„ä½çº§è§£å†³æ–¹æ¡ˆã€‚è®©æˆ‘ä»¬ä¿æŒè¿™ç§æ–¹å¼ï¼Œéšç€æˆ‘ä»¬å¯¹vaporä¸–ç•Œçš„æ·±å…¥ç ”ç©¶ï¼Œæ‚¨ä¼šä¹ æƒ¯å®ƒä»¬ã€‚</p>
<p>fatureçš„å¥½å¤„æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨åŠŸèƒ½æ–¹æ³•å¯¹å…¶è¿›è¡Œè½¬æ¢ã€‚å®ƒä»¬çš„å·¥ä½œæ–¹å¼å‡ ä¹ä¸æ˜ å°„æ•°ç»„ç›¸åŒã€‚ mapå’ŒflatMapéƒ½å¯ä»¥åœ¨EventLoopFâ€‹â€‹utureç±»å‹ä¸Šä½¿ç”¨ï¼Œä½†æ˜¯ç¨ååœ¨ä½¿ç”¨Fluentæ—¶å°†åœ¨å®è·µä¸­ä½¿ç”¨å®ƒä»¬ã€‚</p>
<p>å›åˆ°æˆ‘ä»¬çš„å¸–å­è¯¦ç»†ä¿¡æ¯ï¼Œè¿™æ˜¯post.leafæ–‡ä»¶çš„ä¸€ç§å¯èƒ½çš„å®ç°ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* FILE:</span><br><span class="line">* Resources/Views/post.leaf */</span><br><span class="line">#extend("index"): </span><br><span class="line">    #export("body"):</span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">id</span>=<span class="string">"blog"</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"#(post.image)"</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>#(post.title) (#(post.date))<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>#(post.excerpt)<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">            #if(post.category != nil):</span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"category"</span>&gt;</span>#(post.category)<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">            #else:</span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"category"</span>&gt;</span>Uncategorized<span class="tag">&lt;/<span class="name">p</span>&gt;</span> #endif</span><br><span class="line">            <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>#(post.content)<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    #endexport </span><br><span class="line">#endextend</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨Xcodeæˆ–å‘½ä»¤è¡Œæ„å»ºå¹¶è¿è¡Œè¯¥åº”ç”¨ç¨‹åºã€‚ åœ¨æµè§ˆå™¨çª—å£ä¸­ï¼Œå•å‡»å…¶ä¸­ä¸€ç¯‡åšå®¢æ–‡ç« ï¼Œå¸Œæœ›æ‚¨åº”è¯¥èƒ½å¤Ÿé˜…è¯»å…¨æ–‡ã€‚</p>
<p><img src="http://cdn.xuebaonline.com/vapor-3-stp6.png" alt="&quot;&quot;"></p>
<p>ä»SEOè§’åº¦æ¥çœ‹ï¼Œè¿™ç§æ–¹æ³•éå¸¸å¥½ï¼Œå› ä¸ºURLå¹²å‡€ã€‚ è¿™æ˜¯æ’åä¸­æœ€é‡è¦çš„å› ç´ ä¹‹ä¸€ã€‚ ä½œä¸ºå®è·µï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€äº›å…¶ä»–å…ƒä¿¡æ¯æ¥æ‰©å±•index.leafæ¨¡æ¿ï¼Œä»¥æ”¯æŒä¸°å¯Œçš„é¢„è§ˆã€‚</p>
<p>é‚£æœ€åä¸€ä¸ªèœå•é¡¹å‘¢ï¼Ÿ è®©æˆ‘ä»¬ä½¿ç”¨åœ¨æ•™ç¨‹å¼€å§‹æ—¶åˆ›å»ºçš„ç©ºçš„frontend.jsæ–‡ä»¶ã€‚ æˆ‘ä»¬å°†ä»…æ˜¾ç¤ºè­¦æŠ¥ï¼Œä½†æ˜¯æ‚¨å½“ç„¶å¯ä»¥ä½¿ç”¨æ­¤æ¨¡æ¿ä¸ºç½‘ç«™æ·»åŠ ä¸€äº›ç²¾ç¾çš„åŠ¨ç”»ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* FILE:</span></span><br><span class="line"><span class="comment">* Public/javascript/frontend.js */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">about</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    alert(<span class="string">"Char's Blog\n\nversion 1.0.0"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£æ˜¯Aboutèœå•ï¼Œæš‚æ—¶è¿˜ä¸ç®—ä»€ä¹ˆï¼Œä½†æ˜¯æˆ‘å¸Œæœ›è¿™ä¸ªç¤ºä¾‹ä¸ºæ‚¨æä¾›æœ‰å…³å¦‚ä½•å¯¼å…¥å’Œä½¿ç”¨javascriptæ–‡ä»¶çš„åŸºæœ¬æ€æƒ³ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨jQueryæˆ–å…¶ä»–ä»»ä½•æ–¹å¼æ¥æ”¹å–„ç”Ÿæ´»ï¼Œä½†æ˜¯åœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬ä»…æ‰“ç®—ç¼–å†™Vanilla JavaScriptã€‚</p>
<h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>æœ¬ç« éƒ½æ˜¯å…³äºVaporå’ŒLeafæ¨¡æ¿å¼•æ“çš„å…¥é—¨ã€‚ Leafç¡®å®å¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œæ‚¨åªéœ€è¦è®°ä½å‡ ä¸ªæ ‡ç­¾ï¼Œå¤§å¤šæ•°æ—¶å€™æ‚¨ä¼šå‘ç°è‡ªå·±ç¼–å†™HTMLï¼ŒCSSæˆ–javascriptä»£ç ã€‚ æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•åˆ›å»ºæ¨¡å—æ¥åˆ†ç¦»åº”ç”¨ç¨‹åºä¸­çš„å„ä¸ªç»„ä»¶ã€‚ æ¨¡å—æ˜¯çœŸæ­£å¼ºå¤§çš„ä»£ç ç»„ç»‡å·¥å…·ï¼Œä½¿ç”¨ç‹¬ç«‹çš„è·¯ç”±å™¨å’Œæ§åˆ¶å™¨å¯å¸®åŠ©æˆ‘ä»¬åœ¨ä»»ä½•åœ°æ–¹ç»´æŠ¤å¹²å‡€çš„ä»£ç ã€‚ æˆ‘ä»¬è¿˜äº†è§£äº†è·¯ç”±çš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶å¯¹futureè¿›è¡Œäº†ä¸€äº›å°è¯•ã€‚ åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»å¦‚ä½•ä½¿ç”¨Fluentå°†åšå®¢æ¡ç›®æŒä¹…ä¿å­˜åˆ°æœ¬åœ°SQLiteæ•°æ®åº“ä¸­ã€‚</p>

    </div>

    
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- bottom ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5714801576974230"
     data-ad-slot="5659053341"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <div class="reward-container">
  <div>åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    æ‰“èµ
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="Char å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="Char æ”¯ä»˜å®">
        <p>æ”¯ä»˜å®</p>
      </div>

  </div>
</div>
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5eacc50f0dcd8169" async="async"></script>
  </div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Char
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://www.xuebaonline.com/Vapor%E7%B3%BB%E5%88%97%20(%E4%B8%89)%20:%20%E4%BD%BF%E7%94%A8Leaf%E6%9E%84%E5%BB%BA%E7%BD%91%E7%AB%99/" title="Vaporç³»åˆ— (ä¸‰) : ä½¿ç”¨Leafæ„å»ºç½‘ç«™">https://www.xuebaonline.com/Vaporç³»åˆ— (ä¸‰) : ä½¿ç”¨Leafæ„å»ºç½‘ç«™/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¶å®ƒå‘å¸ƒæ¸ é“</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/Bogon">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/images/connectme.JPG">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Swift-5-0/" rel="tag"><i class="fa fa-tag"></i> Swift 5.0</a>
              <a href="/tags/Vapor-4-0/" rel="tag"><i class="fa fa-tag"></i> Vapor 4.0</a>
              <a href="/tags/Leaf/" rel="tag"><i class="fa fa-tag"></i> Leaf</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/Vapor%E7%B3%BB%E5%88%97%20(%E4%BA%8C)%20:%20%20Hello%20Vapor%EF%BC%81/" rel="prev" title="Vaporç³»åˆ— (äºŒ) :  Hello Vaporï¼">
      <i class="fa fa-chevron-left"></i> Vaporç³»åˆ— (äºŒ) :  Hello Vaporï¼
    </a></div>
      <div class="post-nav-item">
    <a href="/Vapor%E7%B3%BB%E5%88%97%20(%E5%9B%9B)%20:%20%20%E5%88%9B%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="next" title="Vaporç³»åˆ— (å››) :  åˆ›å»ºåšå®¢æ•°æ®åº“">
      Vaporç³»åˆ— (å››) :  åˆ›å»ºåšå®¢æ•°æ®åº“ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ä»Leafå¼€å§‹"><span class="nav-number">1.</span> <span class="nav-text">ä»Leafå¼€å§‹</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åšå®¢çš„é¡µé¢å±‚æ¬¡ç»“æ„"><span class="nav-number">2.</span> <span class="nav-text">åšå®¢çš„é¡µé¢å±‚æ¬¡ç»“æ„</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸»é¡µ"><span class="nav-number">3.</span> <span class="nav-text">ä¸»é¡µ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åšå®¢åˆ—è¡¨"><span class="nav-number">4.</span> <span class="nav-text">åšå®¢åˆ—è¡¨</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åšå®¢æ¡ç›®é¡µé¢"><span class="nav-number">5.</span> <span class="nav-text">åšå®¢æ¡ç›®é¡µé¢</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ‘˜è¦"><span class="nav-number">6.</span> <span class="nav-text">æ‘˜è¦</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Char"
      src="http://cdn.xuebaonline.com/blog_avatar.JPG">
  <p class="site-author-name" itemprop="name">Char</p>
  <div class="site-description" itemprop="description">æ›¾ç»æ²§æµ·éš¾ä¸ºæ°´ï¼Œé™¤å´å·«å±±ä¸æ˜¯äº‘ã€‚</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">179</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">70</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">144</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="sidebar-button motion-element">
    <a onclick="Chatra('openChat', true);"><i class="fa fa-comment"></i>
    è”ç³»æˆ‘
  </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Bogon" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Bogon" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhangqixcu@gmail.com" title="E-Mail â†’ mailto:zhangqixcu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5640441479" title="æ–°æµªå¾®åš â†’ https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5640441479" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/bogonbug" title="CSDN â†’ https:&#x2F;&#x2F;blog.csdn.net&#x2F;bogonbug" rel="noopener" target="_blank"><i class="fab fa-skype fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Bogon" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;Bogon" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/4368897/qizhang" title="StackOverflow â†’ https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;4368897&#x2F;qizhang" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i></a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      æ¨èé˜…è¯»
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://developer.apple.com/swift/" title="https:&#x2F;&#x2F;developer.apple.com&#x2F;swift&#x2F;" rel="noopener" target="_blank">Swift 5.4</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://developer.apple.com/documentation/objectivec" title="https:&#x2F;&#x2F;developer.apple.com&#x2F;documentation&#x2F;objectivec" rel="noopener" target="_blank">Objective-C</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://flutter.cn/" title="https:&#x2F;&#x2F;flutter.cn&#x2F;" rel="noopener" target="_blank">Flutter</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://go.dev/" title="https:&#x2F;&#x2F;go.dev&#x2F;" rel="noopener" target="_blank">Goland</a>
        </li>
    </ul>
  </div>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- side ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5714801576974230"
     data-ad-slot="8285216682"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">è±«ICPå¤‡20011156å·-1 </a>
      <img src="/images/beian.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41172402000135" rel="noopener" target="_blank">è±«å…¬ç½‘å®‰å¤‡41172402000135å· </a>
  </div>

<div class="copyright">
  
  &copy; 2020 â€“ 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Char</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">åšå®¢å…¨ç«™å…±1.5må­—</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">23:11</span>
</div>

<!--
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5eacc50f0dcd8169" async="async"></script>
  </div>
-->

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>




  <script>
    (function(d, w, c) {
      w.ChatraID = 'PxGFNHLgjQ3C3Hmpo';
      var s = d.createElement('script');
      w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments);
      };
      s.async = true;
      s.src = 'https://call.chatra.io/chatra.js';
      if (d.head) d.head.appendChild(s);
    })(document, window, 'Chatra');
  </script>









  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'rfRdmQpsk2Crnz747tDDOu26-gzGzoHsz',
      appKey     : 'eyu1k9BeINgR5FuXzbc969UA',
      placeholder: "å†™å‡ºä½ çš„æƒ³æ³•â€¦â€¦",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>